{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/utility.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inspect } from \"util\";\n\nexport function trim(s: string): string {\n  return s.trim();\n}\n\nexport function stringify(x: any): string {\n  return JSON.stringify(x, null, 4);\n}\n\nexport function do_<A>(k: () => A): A {\n  return k();\n}\n\nexport function formatDate(date: Date): string {\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nexport function formatDateTime(date: Date): string {\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  const hours = date.getHours().toString().padStart(2, \"0\");\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day},${hours}:${minutes}`;\n}\n\nexport function fromFormattedDateTime(s: string): Date | undefined {\n  const [dateStr, timeStr] = s.split(\",\");\n  if (dateStr === undefined || timeStr === undefined) return undefined;\n  const [year, month, day] = dateStr.split(\"-\").map(Number);\n  if (year === undefined || month === undefined || day === undefined)\n    return undefined;\n  const [hours, minutes] = timeStr.split(\":\").map(Number);\n  if (hours === undefined || minutes === undefined) return undefined;\n  return new Date(year, month - 1, day, hours, minutes);\n}\n\nexport function show<A>(x: A): string {\n  return inspect(x, {\n    colors: true,\n    compact: false,\n    depth: undefined,\n    sorted: false,\n  });\n}\n\nexport function parseDate(s: string): Date | null {\n  const date = new Date(s);\n  if (isNaN(date.getTime())) return null;\n  return date;\n}\n\nexport function normString(s: string | undefined): string | undefined {\n  if (s === undefined) return undefined;\n  s = s.trim();\n  if (s.length === 0) return undefined;\n  return s;\n}\n\nexport function encodeURIComponent_v2(s: string): string {\n  return encodeURIComponent(s.replaceAll(\" \", \"_\"));\n}\n\n// export function any<A>(f: (x:A) => boolean, xs: A[]): boolean {\n\n// }\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;;;;;;AAErD;;AAEO,SAAS,KAAK,CAAS;IAC5B,OAAO,EAAE,IAAI;AACf;AAEO,SAAS,UAAU,CAAM;IAC9B,OAAO,KAAK,SAAS,CAAC,GAAG,MAAM;AACjC;AAEO,SAAS,IAAO,CAAU;IAC/B,OAAO;AACT;AAEO,SAAS,WAAW,IAAU;IACnC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAEO,SAAS,eAAe,IAAU;IACvC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,MAAM,QAAQ,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACrD,MAAM,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACzD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,EAAE,SAAS;AACtD;AAEO,SAAS,sBAAsB,CAAS;IAC7C,MAAM,CAAC,SAAS,QAAQ,GAAG,EAAE,KAAK,CAAC;IACnC,IAAI,YAAY,aAAa,YAAY,WAAW,OAAO;IAC3D,MAAM,CAAC,MAAM,OAAO,IAAI,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAClD,IAAI,SAAS,aAAa,UAAU,aAAa,QAAQ,WACvD,OAAO;IACT,MAAM,CAAC,OAAO,QAAQ,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAChD,IAAI,UAAU,aAAa,YAAY,WAAW,OAAO;IACzD,OAAO,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,OAAO;AAC/C;AAEO,SAAS,KAAQ,CAAI;IAC1B,OAAO,CAAA,GAAA,iGAAA,CAAA,UAAO,AAAD,EAAE,GAAG;QAChB,QAAQ;QACR,SAAS;QACT,OAAO;QACP,QAAQ;IACV;AACF;AAEO,SAAS,UAAU,CAAS;IACjC,MAAM,OAAO,IAAI,KAAK;IACtB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;IAClC,OAAO;AACT;AAEO,SAAS,WAAW,CAAqB;IAC9C,IAAI,MAAM,WAAW,OAAO;IAC5B,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,MAAM,KAAK,GAAG,OAAO;IAC3B,OAAO;AACT;AAEO,SAAS,sBAAsB,CAAS;IAC7C,OAAO,mBAAmB,EAAE,UAAU,CAAC,KAAK;AAC9C,EAEA,kEAAkE;CAElE,IAAI","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/console.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport path from \"path\";\nimport { formatDateTime } from \"./utility\";\n\nexport function log(...xs: any[]) {\n  console.log(`[${formatDateTime(new Date())}]`, ...xs);\n}\n\nexport function error(...xs: any[]) {\n  console.error(`[${formatDateTime(new Date())}]`, ...xs);\n}\n\nexport function makeConsole(args: { __filename: string }) {\n  const prefix = `[${path.basename(args.__filename)}]`;\n  return {\n    log(...xs: any[]) {\n      log(prefix, ...xs);\n    },\n    error(...xs: any[]) {\n      error(prefix, ...xs);\n    },\n  } as const;\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AACrD;AACA;;;AAEO,SAAS,IAAI,GAAG,EAAS;IAC9B,QAAQ,GAAG,CAAC,CAAC,CAAC,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,CAAC,CAAC,KAAK;AACpD;AAEO,SAAS,MAAM,GAAG,EAAS;IAChC,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,CAAC,CAAC,KAAK;AACtD;AAEO,SAAS,YAAY,IAA4B;IACtD,MAAM,SAAS,CAAC,CAAC,EAAE,iGAAA,CAAA,UAAI,CAAC,QAAQ,CAAC,KAAK,UAAU,EAAE,CAAC,CAAC;IACpD,OAAO;QACL,KAAI,GAAG,EAAS;YACd,IAAI,WAAW;QACjB;QACA,OAAM,GAAG,EAAS;YAChB,MAAM,WAAW;QACnB;IACF;AACF","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/ai.ts"],"sourcesContent":["import { execFile } from \"child_process\";\nimport { promisify } from \"util\";\nimport { error } from \"./console\";\nimport { Ollama } from \"ollama\";\n\n// -----------------------------------------------------------------------------\n\nconst execFileAsync = promisify(execFile);\n\n// -----------------------------------------------------------------------------\n\nexport const ollama = new Ollama({\n  // host: \"https://ollama.com\",\n  // headers: {\n  //   Authorization: `Bearer ${process.env.OLLAMA_API_KEY}`,\n  // },\n});\n\nexport async function gemini(\n  prompt: string,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  opts?: {\n    model: \"gemini-2.5-pro\" | \"gemini-2.5-flash\";\n  },\n) {\n  const { stdout, stderr } = await execFileAsync(\n    `gemini`,\n    [\n      // opts?.model ? [`--model`, opts.model] : [],\n      `--prompt`,\n      prompt.trim(),\n    ].flat(),\n  );\n  if (stderr.length > 0) error(stderr);\n  let result = stdout;\n  const prefix = \"Loaded cached credentials.\\n\";\n  if (result.startsWith(prefix)) result = result.slice(prefix.length);\n  return result;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEA,gFAAgF;AAEhF,MAAM,gBAAgB,CAAA,GAAA,iGAAA,CAAA,YAAS,AAAD,EAAE,mHAAA,CAAA,WAAQ;AAIjC,MAAM,SAAS,IAAI,wIAAA,CAAA,SAAM,CAAC;AAKjC;AAEO,eAAe,OACpB,MAAc,EACd,6DAA6D;AAC7D,IAEC;IAED,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,cAC/B,CAAC,MAAM,CAAC,EACR;QACE,8CAA8C;QAC9C,CAAC,QAAQ,CAAC;QACV,OAAO,IAAI;KACZ,CAAC,IAAI;IAER,IAAI,OAAO,MAAM,GAAG,GAAG,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EAAE;IAC7B,IAAI,SAAS;IACb,MAAM,SAAS;IACf,IAAI,OAAO,UAAU,CAAC,SAAS,SAAS,OAAO,KAAK,CAAC,OAAO,MAAM;IAClE,OAAO;AACT","debugId":null}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/file.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type z from \"zod\";\nimport * as fs from \"fs/promises\";\nimport path from \"path\";\n\nexport async function readTextFile(filepath: string): Promise<string | null> {\n  try {\n    return await fs.readFile(filepath, { encoding: \"utf8\" });\n  } catch {\n    return null;\n  }\n}\n\nexport async function writeTextFile(\n  filepath: string,\n  content: string,\n): Promise<void> {\n  await fs.mkdir(path.dirname(filepath), { recursive: true });\n  await fs.writeFile(filepath, content, { encoding: \"utf8\" });\n}\n\nexport async function readJsonFile<A>(\n  filepath: string,\n  schema: z.ZodSchema<A>,\n): Promise<z.ZodSafeParseResult<A> | null> {\n  let content: string;\n  try {\n    content = await fs.readFile(filepath, { encoding: \"utf8\" });\n  } catch {\n    return null;\n  }\n  // makes sure to still throw error if we cant even parse the JSON\n  try {\n    return schema.safeParseAsync(JSON.parse(content));\n  } catch (e) {\n    throw new Error(`Failed to parse JSON file ${filepath}: ${e}`);\n  }\n}\n\nexport async function writeJsonFile(\n  filepath: string,\n  data: any,\n): Promise<void> {\n  await fs.mkdir(path.dirname(filepath), { recursive: true });\n  await fs.writeFile(filepath, JSON.stringify(data, null, 4), {\n    encoding: \"utf8\",\n  });\n}\n\nexport async function renameFile(\n  filepath_source: string,\n  filepath_target: string,\n) {\n  await fs.mkdir(path.dirname(filepath_target), { recursive: true });\n  await fs.rename(filepath_source, filepath_target);\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;AAErD;AACA;;;AAEO,eAAe,aAAa,QAAgB;IACjD,IAAI;QACF,OAAO,MAAM,qHAAA,CAAA,WAAW,CAAC,UAAU;YAAE,UAAU;QAAO;IACxD,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,cACpB,QAAgB,EAChB,OAAe;IAEf,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,WAAW;QAAE,WAAW;IAAK;IACzD,MAAM,qHAAA,CAAA,YAAY,CAAC,UAAU,SAAS;QAAE,UAAU;IAAO;AAC3D;AAEO,eAAe,aACpB,QAAgB,EAChB,MAAsB;IAEtB,IAAI;IACJ,IAAI;QACF,UAAU,MAAM,qHAAA,CAAA,WAAW,CAAC,UAAU;YAAE,UAAU;QAAO;IAC3D,EAAE,OAAM;QACN,OAAO;IACT;IACA,iEAAiE;IACjE,IAAI;QACF,OAAO,OAAO,cAAc,CAAC,KAAK,KAAK,CAAC;IAC1C,EAAE,OAAO,GAAG;QACV,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,EAAE,EAAE,GAAG;IAC/D;AACF;AAEO,eAAe,cACpB,QAAgB,EAChB,IAAS;IAET,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,WAAW;QAAE,WAAW;IAAK;IACzD,MAAM,qHAAA,CAAA,YAAY,CAAC,UAAU,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;QAC1D,UAAU;IACZ;AACF;AAEO,eAAe,WACpB,eAAuB,EACvB,eAAuB;IAEvB,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,kBAAkB;QAAE,WAAW;IAAK;IAChE,MAAM,qHAAA,CAAA,SAAS,CAAC,iBAAiB;AACnC","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/ontology.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as rss_parser from \"rss-parser\";\nimport z from \"zod\";\nimport { parseDate } from \"./utility\";\n\nexport const FuzzyDate = z.string().transform((s) => {\n  const d = parseDate(s);\n  if (!d) return s;\n  return d;\n});\n\nexport type Article = z.infer<typeof Article>;\n\nexport const Article = z.object({\n  title: z.string().optional().describe(\"The title of the article\"),\n  content: z\n    .string()\n    .optional()\n    .describe(\"The HTML string of processed article content\"),\n  textContent: z\n    .string()\n    .optional()\n    .describe(\n      \"The text content of the article, with all the HTML tags removed\",\n    ),\n  length: z\n    .number()\n    .optional()\n    .describe(\"The length of an article, in characters\"),\n  excerpt: z\n    .string()\n    .optional()\n    .describe(\"The article description, or short excerpt from the content\"),\n  byline: z.string().optional().describe(\"The author metadata\"),\n  dir: z.string().optional().describe(\"The content direction\"),\n  siteName: z.string().optional().describe(\"The name of the site\"),\n  lang: z.string().optional().describe(\"The content language\"),\n  publishedTime: FuzzyDate.optional().describe(\"The published time\"),\n  summary: z\n    .string()\n    .optional()\n    .describe(\"A short summary of the article content\"),\n  tags: z\n    .array(z.string())\n    .optional()\n    .describe(\"A list of categorizational tags for the article content\"),\n  url: z.url().optional().describe(\"The URL of the article\"),\n  rssFeedConfig: z.lazy(() => RssFeedConfig).optional(),\n});\n\nexport type ArticleContent = z.infer<typeof ArticleContent>;\nexport const ArticleContent = z.string();\n\nexport type ArticleMetadata = z.infer<typeof ArticleMetadata>;\nexport const ArticleMetadata = z.object({\n  id: z.string(),\n  title: z.optional(z.string()),\n  url: z.string(),\n  addedDate: z.iso.date(),\n  addedTime: z.number(),\n  publishedTime: z.optional(FuzzyDate),\n});\n\nexport type ArticleSummary = z.infer<typeof ArticleSummary>;\nexport const ArticleSummary = z.string();\n\nexport type ArticleTags = z.infer<typeof ArticleTags>;\nexport const ArticleTags = z.array(z.string());\n\nexport type ArticlePlus = z.infer<typeof ArticlePlus>;\nexport const ArticlePlus = z.object({\n  id: z.string(),\n  article: Article,\n  metadata: ArticleMetadata,\n  content: z.optional(ArticleContent),\n  summary: z.optional(ArticleSummary),\n  tags: z.optional(ArticleTags),\n});\n\nexport type ArticlePreview = {\n  metadata: ArticleMetadata;\n  summary?: ArticleSummary;\n  tags?: ArticleTags;\n};\n\n/**\n * RSS feed config.\n *\n * Example:\n * ```json\n * {\n *   \"name\": \"Hacker News Top\",\n *   \"feedUrl\": \"https://hnrss.org/best\",\n *   \"maxItems\": 20\n * }\n * ```\n */\nexport type RssFeedConfig = z.infer<typeof RssFeedConfig>;\nexport const RssFeedConfig = z.object({\n  name: z.string().nonempty(),\n  feedUrl: z.url(),\n  maxItems: z.optional(z.number().min(1)),\n  filters: z.optional(\n    z.object({\n      keywords: z.optional(z.array(z.string())),\n      topics: z.optional(z.array(z.string())),\n    }),\n  ),\n});\n\n/**\n * RSS feed.\n *\n * Example:\n * ```json\n * {\n *  items: [\n *    {\n *      creator: \"rd\",\n *      title: \"GPT-5\",\n *      link: \"https://openai.com/gpt-5/\",\n *      pubDate: \"Thu, 07 Aug 2025 17:00:21 +0000\",\n *      \"dc:creator\": \"rd\",\n *      comments: \"https://news.ycombinator.com/item?id=44826997\",\n *      content: \"\\n<p><a href=\\\"https://www.youtube.com/watch?v=0Uu_VJeVVfo\\\" rel=\\\"nofollow\\\">https://www.youtube.com/watch?v=0Uu_VJeVVfo</a></p>\\n<hr>\\n<p>Comments URL: <a href=\\\"https://news.ycombinator.com/item?id=44826997\\\">https://news.ycombinator.com/item?id=44826997</a></p>\\n<p>Points: 1323</p>\\n<p># Comments: 1583</p>\\n\",\n *      contentSnippet: \"https://www.youtube.com/watch?v=0Uu_VJeVVfo\\nComments URL: https://news.ycombinator.com/item?id=44826997\\nPoints: 1323\\n# Comments: 1583\",\n *      guid: \"https://news.ycombinator.com/item?id=44826997\",\n *      isoDate: \"2025-08-07T17:00:21.000Z\",\n *    }\n *  ],\n *  feedUrl: \"https://hnrss.org/best\",\n *  paginationLinks: {\n *    self: \"https://hnrss.org/best\",\n *  },\n *  title: \"Hacker News: Best\",\n *  description: \"Hacker News RSS\",\n *  generator: \"hnrss v2.1.1\",\n *  link: \"https://news.ycombinator.com/best\",\n *  lastBuildDate: \"Fri, 08 Aug 2025 00:04:01 +0000\",\n *  docs: \"https://hnrss.org/\",\n * }\n * ```\n */\nexport type RssFeed = {\n  config: RssFeedConfig;\n  rss: rss_parser.Output<{ [key: string]: any }>;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/paths.ts"],"sourcesContent":["import * as fs from \"fs/promises\";\nimport path from \"path\";\n\n// input\nconst dirpath_feed = path.join(\"input\", \"feed\");\n// output-1\nconst dirpath_new_article = path.join(\"output-1\", \"new\", \"article\");\nconst dirpath_new_article_metadata = path.join(\n  \"output-1\",\n  \"new\",\n  \"article_metadata\",\n);\n\nconst dirpath_ignored_article = path.join(\"output-1\", \"ignored\", \"article\");\nconst dirpath_ignored_article_metadata = path.join(\n  \"output-1\",\n  \"ignored\",\n  \"article_metadata\",\n);\nconst dirpath_article = path.join(\"output-1\", \"old\", \"article\");\nconst dirpath_article_metadata = path.join(\n  \"output-1\",\n  \"old\",\n  \"article_metadata\",\n);\n\n// output-2\nconst dirpath_article_content = path.join(\"output-2\", \"article_content\");\nconst dirpath_article_summary = path.join(\"output-2\", \"article_summary\");\nconst dirpath_article_tags = path.join(\"output-2\", \"article_tags\");\n\nexport const paths = {\n  // external files\n  filepaths_articleUrlLists: [\n    \"/Users/henry/Library/Mobile\\ Documents/com\\~apple\\~CloudDocs/url-notes/article_urls.txt\",\n  ],\n  // feed\n  dirpath_feed,\n  async get_filepaths_of_feeds(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_feed, { encoding: \"utf8\", recursive: false })\n    ).flatMap((fn) =>\n      fn.endsWith(\".feed.json\") ? [path.join(dirpath_feed, fn)] : [],\n    );\n  },\n\n  // article\n  dirpath_new_article,\n  dirpath_new_article_metadata,\n  dirpath_ignored_article,\n  dirpath_ignored_article_metadata,\n  dirpath_article,\n  dirpath_article_metadata,\n  dirpath_article_content,\n  dirpath_article_summary,\n  dirpath_article_tags,\n  async get_articleIds_new(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_new_article, {\n        encoding: \"utf8\",\n        recursive: false,\n      })\n    ).flatMap((fn) =>\n      fn.endsWith(\".json\") ? [path.basename(fn, \".json\")] : [],\n    );\n  },\n  filepath_article_new(articleId: string) {\n    return path.join(dirpath_new_article, `${articleId}.json`);\n  },\n  filepath_article_new_metadata(articleId: string) {\n    return path.join(dirpath_new_article_metadata, `${articleId}.json`);\n  },\n  filepath_articleIds_ignored: path.join(\"output-1\", \"articleIds_ignored.json\"),\n  filepath_article_ignored(articleId: string) {\n    return path.join(dirpath_ignored_article, `${articleId}.json`);\n  },\n  filepath_article_ignored_metadata(articleId: string) {\n    return path.join(dirpath_ignored_article_metadata, `${articleId}.json`);\n  },\n  filepath_article(articleId: string) {\n    return path.join(dirpath_article, `${articleId}.json`);\n  },\n  filepath_article_metadata(articleId: string) {\n    return path.join(dirpath_article_metadata, `${articleId}.json`);\n  },\n  async get_articleIds(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_article, { encoding: \"utf8\", recursive: false })\n    ).flatMap((fn) =>\n      fn.endsWith(\".json\") ? [path.basename(fn, \".json\")] : [],\n    );\n  },\n  filepath_article_content(articleId: string) {\n    return path.join(dirpath_article_content, `${articleId}.md`);\n  },\n  filepath_article_summary(articleId: string) {\n    return path.join(dirpath_article_summary, `${articleId}.md`);\n  },\n  filepath_article_tags(articleId: string) {\n    return path.join(dirpath_article_tags, `${articleId}.csv`);\n  },\n};\n\nexport default paths;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/article.ts"],"sourcesContent":["import { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\nimport TurndownService from \"turndown\";\nimport * as ai from \"./ai\";\nimport { readJsonFile, readTextFile } from \"./file\";\nimport { Article, ArticleMetadata, ArticlePlus } from \"./ontology\";\nimport paths from \"./paths\";\nimport { error, log } from \"./console\";\nimport { PdfData, VerbosityLevel } from \"pdfdataextract\";\n\n/**\n * Extracts an article from the HTML page at a given URL.\n *\n * @param url The URL of an HTML page.\n * @returns The {@link Article} extracted from the HTML page. If there was any error, returns null instead.\n */\nexport async function fetchArticle(url: string): Promise<Article | null> {\n  try {\n    log(`Fetching article at URL: ${url}`);\n\n    // special case: github\n    if (url.includes(\"github.com\")) {\n      const readme = await fetchGithubRepositoryReadme(url);\n      if (readme === null) return null;\n      const data = await fetchGithubRepositoryData(url);\n      if (data === null) return null;\n      return {\n        title: data.full_name,\n        tags: data.topics,\n        content: readme,\n        textContent: readme,\n        siteName: \"https://github.com\",\n      };\n    }\n\n    // special case: arxiv\n    if (url.includes(\"arxiv.org\")) {\n      const data = await fetchArxivArticleData(url);\n      if (data === null) return null;\n      return {\n        url,\n        title: data.title,\n        tags: data.categories,\n        content: data.summary,\n        textContent: data.summary,\n        excerpt: data.summary,\n        publishedTime: data.publishedDate,\n        byline: data.authors.join(\", \"),\n        siteName: \"https://arxiv.org\",\n      };\n    }\n\n    // special case: pdf\n    const pdfData = await fetchPdfText(url);\n\n    if (pdfData !== null) {\n      if (pdfData.text === undefined) return null;\n      return {\n        url,\n        title:\n          pdfData.info?.Title ??\n          (pdfData.outline !== undefined && pdfData.outline.length > 0\n            ? pdfData.outline[0].title\n            : url),\n        publishedTime: pdfData.info?.CreationDate,\n        content: pdfData.text.join(\"\\n\"),\n        byline: pdfData.info?.Author,\n        textContent: pdfData.text.join(\"\\n\"),\n        tags: pdfData.info?.Keywords?.split(\",\")\n          .map((s) => s.trim())\n          .filter((s) => s.length > 0),\n      };\n    }\n\n    // default case\n    const html = await (await fetch(url, { method: \"GET\" })).text();\n    const doc = new JSDOM(html, { url });\n    const reader = new Readability(doc.window.document);\n    const prearticle = reader.parse();\n    if (!prearticle) return null;\n    const article = Object.entries(prearticle).reduce((acc, [key, value]) => {\n      // @ts-expect-error Object.entries is not type-safe\n      acc[key] = value === null ? undefined : value;\n      return acc;\n    }, {} as Article);\n    article.url = url;\n    return article;\n  } catch (e) {\n    error(`Failed to fetch article: ${e}`);\n    return null;\n  }\n}\n\n/**\n * Transforms an article into a Markdown document.\n *\n * @param article The article to transform.\n * @returns The Markdown document as a string that corresponds to the input article.\n */\nexport async function getMarkdownContent(article: Article): Promise<string> {\n  const turndownService = new TurndownService({ headingStyle: \"atx\" });\n  let markdownString = \"\";\n  const metadata: string[] = [];\n\n  function escape(s: string): string {\n    return s.replace(/\"/g, '\\\\\"');\n  }\n\n  // populate metadata\n  if (article.title) {\n    metadata.push(`title: \"${escape(article.title)}\"`);\n  }\n  if (article.byline) {\n    metadata.push(`author: \"${escape(article.byline)}\"`);\n  }\n  if (article.siteName) {\n    metadata.push(`siteName: \"${escape(article.siteName)}\"`);\n  }\n  if (article.publishedTime) {\n    metadata.push(`pubDate: \"${article.publishedTime}\"`);\n  }\n  if (article.lang) {\n    metadata.push(`lang: \"${escape(article.lang)}\"`);\n  }\n  if (article.tags && article.tags.length > 0) {\n    metadata.push(`tags: \"${article.tags.join(\", \")}\"`);\n  }\n\n  // write metadata\n  if (metadata.length > 0) {\n    markdownString += `---\\n${metadata.join(\"\\n\")}\\n---\\n\\n`;\n  }\n\n  if (article.title) {\n    markdownString += `# ${article.title}\\n\\n`;\n  }\n\n  if (article.content) {\n    markdownString += turndownService.turndown(article.content);\n  } else if (article.textContent) {\n    markdownString += article.textContent;\n  } else if (article.summary) {\n    markdownString += article.summary;\n  } else if (article.excerpt) {\n    markdownString += article.excerpt;\n  }\n\n  return markdownString.trim();\n}\n\nexport async function generateSummary(content: string): Promise<string | null> {\n  const summary = (\n    await ai.gemini(`\nWrite a very concise and technical bullet-point overview of the following article. Use markdown syntax. Respond with JUST the overview.\n\n${content.slice(0, 200000)}\n`)\n  ).trim();\n  if (summary.length === 0) return null;\n  return summary;\n}\n\nexport async function generateTags(\n  article: Article,\n  summary: string,\n): Promise<string[] | null> {\n  const title = article.title;\n  const tags = (\n    await ai.gemini(\n      `\nConsider the following article summary. Your task is to come up with the tags that best categorize the content. You may use many tags with varying degrees of specificity. Respond with JUST the comma-separated list of tags.\n\n${title ? `Summary of \"${title}\":` : \"Summary:\"}\n\n${summary}\n`,\n      { model: \"gemini-2.5-flash\" },\n    )\n  )\n    .split(\",\")\n    .map((s) => s.trim().toLowerCase());\n  if (\n    tags.length === 0 &&\n    (article.tags === undefined || article.tags.length === 0)\n  )\n    return null;\n  return tags.concat(article.tags ?? []);\n}\n\nexport async function readArticle(articleId: string): Promise<Article | null> {\n  const parseResult_article = await readJsonFile(\n    paths.filepath_article(articleId),\n    Article,\n  );\n  if (!parseResult_article) {\n    error(`Failed to read article: ${articleId}`);\n    return null;\n  }\n  if (!parseResult_article.data) {\n    error(\n      `Failed to parse article: ${articleId}\\n${parseResult_article.error}`,\n    );\n    return null;\n  }\n  const article: Article = parseResult_article.data;\n  return article;\n}\n\nexport async function readArticle_new(\n  articleId: string,\n): Promise<Article | null> {\n  const parseResult_article = await readJsonFile(\n    paths.filepath_article_new(articleId),\n    Article,\n  );\n  if (!parseResult_article) {\n    error(`Failed to read article: ${articleId}`);\n    return null;\n  }\n  if (!parseResult_article.data) {\n    error(\n      `Failed to parse article: ${articleId}\\n${parseResult_article.error}`,\n    );\n    return null;\n  }\n  const article: Article = parseResult_article.data;\n  return article;\n}\n\nexport async function readArticleMetadata(\n  articleId: string,\n): Promise<ArticleMetadata | null> {\n  const result = await readJsonFile(\n    paths.filepath_article_metadata(articleId),\n    ArticleMetadata,\n  );\n  if (!result) return null;\n  return result.success ? result.data : null;\n}\n\nexport async function readArticleContent(\n  articleId: string,\n): Promise<string | null> {\n  return await readTextFile(paths.filepath_article_content(articleId));\n}\n\nexport async function readArticleSummary(\n  articleId: string,\n): Promise<string | null> {\n  return await readTextFile(paths.filepath_article_summary(articleId));\n}\n\nexport async function readArticleTags(\n  articleId: string,\n): Promise<string[] | null> {\n  const tags_string = await readTextFile(\n    paths.filepath_article_tags(articleId),\n  );\n  if (!tags_string) return null;\n  return tags_string.split(\",\").map((s) => s.trim());\n}\n\nexport async function readArticlePlus(\n  articleId: string,\n): Promise<ArticlePlus | null> {\n  const article = await readArticle(articleId);\n  if (!article) return null;\n  const metadata = await readArticleMetadata(articleId);\n  if (!metadata) return null;\n  const content = (await readArticleContent(articleId)) ?? undefined;\n  const summary = (await readArticleSummary(articleId)) ?? undefined;\n  const tags = (await readArticleTags(articleId)) ?? undefined;\n  const articlePlus: ArticlePlus = {\n    id: articleId,\n    article,\n    metadata,\n    content,\n    summary,\n    tags,\n  };\n  return articlePlus;\n}\n\n/*\n * This file contains the implementation for the `fetchGithubReadme` function.\n *\n * The function accomplishes its goal by following these steps:\n * 1. It first attempts to parse the provided `url` string using the native `URL` constructor to extract the pathname.\n * 2. It splits the pathname (e.g., \"/owner/repo\") to isolate the repository owner and name.\n * 3. It constructs a URL for the official GitHub API endpoint that provides metadata for a repository's README file. Using this API endpoint is more robust than guessing the default branch name (e.g., \"main\" or \"master\") and the exact README filename (e.g., \"README.md\").\n * 4. It uses the `fetch` API to make a request to this GitHub API endpoint.\n * 5. If the API request is successful, it parses the JSON response to find the `download_url`, which is a direct link to the raw README file content.\n * 6. It then makes a second `fetch` request to this `download_url`.\n * 7. If this second request is successful, it reads the response body as plain text and returns it.\n * 8. The entire process is wrapped in a `try...catch` block. If any step fails (e.g., the URL is invalid, the repository doesn't exist, a network error occurs, or the repository has no README), the error is caught, and the function returns `null` as specified.\n */\nexport async function fetchGithubRepositoryReadme(\n  url: string,\n): Promise<string | null> {\n  try {\n    const urlParts = new URL(url).pathname.split(\"/\").filter(Boolean);\n    if (urlParts.length < 2) {\n      return null;\n    }\n    const [owner, repo] = urlParts;\n\n    const apiUrl = `https://api.github.com/repos/${owner}/${repo}/readme`;\n\n    const apiResponse = await fetch(apiUrl, {\n      headers: {\n        Accept: \"application/vnd.github.v3+json\",\n      },\n    });\n\n    if (!apiResponse.ok) {\n      return null;\n    }\n\n    const readmeData = await apiResponse.json();\n    const downloadUrl = readmeData.download_url;\n\n    if (!downloadUrl) {\n      return null;\n    }\n\n    const contentResponse = await fetch(downloadUrl);\n\n    if (!contentResponse.ok) {\n      return null;\n    }\n\n    const markdownText = await contentResponse.text();\n    return markdownText;\n  } catch (e) {\n    error(`Failed to fetch GitHub README: ${e}`);\n    return null;\n  }\n}\n\nexport type GithubRepositoryData = {\n  name: string;\n  full_name: string;\n  topics?: string[];\n};\n\n/**\n * Fetches the {@link GithubRepositoryData} for the Github repository at the given URL.\n *\n * @param url\n * @returns The fetched {@link GithubRepositoryData} or null if the fetch fails.\n */\nexport async function fetchGithubRepositoryData(\n  url: string,\n): Promise<GithubRepositoryData | null> {\n  try {\n    const urlParts = new URL(url).pathname.split(\"/\").filter(Boolean);\n    if (urlParts.length < 2) {\n      return null;\n    }\n    const [owner, repo] = urlParts;\n\n    const apiUrl = `https://api.github.com/repos/${owner}/${repo}`;\n\n    const apiResponse = await fetch(apiUrl, {\n      headers: {\n        Accept: \"application/vnd.github.v3+json\",\n      },\n    });\n\n    if (!apiResponse.ok) {\n      return null;\n    }\n    const repoData = await apiResponse.json();\n    return repoData;\n  } catch (e) {\n    error(`Failed to fetch GitHub repository data: ${e}`);\n    return null;\n  }\n}\n\n/*\n * This file contains the implementation for the `fetchArxivArticleData` function.\n * The primary goal of this function is to accept a URL pointing to an ArXiv article's\n * abstract or PDF page, retrieve the article's metadata from the official ArXiv API,\n * and then parse that data into a structured `ArxivArticle` object.\n *\n * The process is as follows:\n * 1.  URL Parsing: The function first extracts the unique article ID from the input URL.\n * It uses a regular expression to robustly handle different URL formats, such as\n * those ending in `/abs/`, `/pdf/`, and with or without a version number (e.g., v1).\n * 2.  API Request: Once the ID is isolated, it constructs a query URL for the ArXiv API.\n * This API is designed for programmatic access to its database and returns data in\n * an XML (Atom) format.\n * 3.  Data Fetching: The native `fetch` API is used to make a network request to the\n * ArXiv API endpoint. It awaits the response and checks for any network or server errors.\n * 4.  XML Parsing: The raw XML text from the response is parsed into a navigable DOM\n * structure using the browser's built-in `DOMParser`. This avoids the need for\n * external libraries.\n * 5.  Data Extraction: The code traverses the parsed XML DOM to find the specific tags\n * containing the required information (id, title, summary, authors, etc.). It uses\n * `querySelector` for single elements and `querySelectorAll` to gather lists like\n * authors and categories.\n * 6.  Object Creation: The extracted string values are cleaned up (e.g., trimming whitespace)\n * and assembled into the final `ArxivArticle` object, conforming to the specified type.\n * 7.  Error Handling: A comprehensive try-catch block wraps the entire process. If any\n * step fails—be it an invalid URL, a network error, a parsing issue, or missing data\n * in the API response—the function will catch the error and return `null`, as\n * required by its signature.\n */\nexport type ArxivArticle = {\n  id: string;\n  /**\n   * link to the abstract of the article\n   */\n  url: string;\n  title: string;\n  summary: string;\n  authors: string[];\n  publishedDate: string;\n  updatedDate: string;\n  /**\n   * human-readable category names\n   */\n  categories: string[];\n};\n\n/**\n * Fetches the {@link ArxivArticle} for the ArXiv article at the given URL.\n *\n * @param url The URL of an ArXiv article to either its PDF (e.g. https://arxiv.org/pdf/2508.09222) or abstract (e.g. https://arxiv.org/abs/2508.09222)\n * @returns The fetched {@link ArxivArticle} or null if the fetch fails.\n */\nexport async function fetchArxivArticleData(\n  url: string,\n): Promise<ArxivArticle | null> {\n  try {\n    const articleIdMatch = url.match(/(\\d{4}\\.\\d{4,5}(v\\d+)?)/);\n    if (!articleIdMatch) {\n      console.error(\"Could not parse ArXiv article ID from URL:\", url);\n      return null;\n    }\n    const articleId = articleIdMatch[1];\n\n    const apiUrl = `https://export.arxiv.org/api/query?id_list=${articleId}`;\n\n    const response = await fetch(apiUrl);\n    if (!response.ok) {\n      console.error(\n        `Failed to fetch from ArXiv API. Status: ${response.status}`,\n      );\n      return null;\n    }\n\n    const xmlText = await response.text();\n    const dom = new JSDOM(xmlText, { contentType: \"text/xml\" });\n    const xmlDoc = dom.window.document;\n\n    const entry = xmlDoc.querySelector(\"entry\");\n    if (!entry) {\n      console.error(\"No <entry> tag found in ArXiv API response.\");\n      return null;\n    }\n\n    const getText = (selector: string): string => {\n      const element = entry.querySelector(selector);\n      return element?.textContent?.trim().replace(/\\s+/g, \" \") || \"\";\n    };\n\n    const getLink = (): string => {\n      const linkElement = entry.querySelector('link[title=\"abstract\"]');\n      return linkElement?.getAttribute(\"href\") || getText(\"id\");\n    };\n\n    const getArray = (selector: string, attribute?: string): string[] => {\n      try {\n        const elements = entry.querySelectorAll(selector);\n        return Array.from(elements)\n          .map((el) => {\n            if (attribute) {\n              return el.getAttribute(attribute) || \"\";\n            }\n            return el.textContent?.trim() || \"\";\n          })\n          .filter(Boolean);\n      } catch (e) {\n        error(`Error getting array: ${e}`);\n        return [];\n      }\n    };\n\n    const article: ArxivArticle = {\n      id: getText(\"id\"),\n      url: getLink(),\n      title: getText(\"title\"),\n      summary: getText(\"summary\"),\n      authors: getArray(\"author name\"),\n      publishedDate: getText(\"published\"),\n      updatedDate: getText(\"updated\"),\n      categories: getArray(\"category\", \"term\").map(\n        (c) => ARXIV_CATEGORY_MAP[c.toLowerCase()] ?? c,\n      ),\n    };\n\n    if (!article.id || !article.title) {\n      console.error(\n        \"Essential article data (id, title) is missing from the parsed response.\",\n      );\n      return null;\n    }\n\n    return article;\n  } catch (error) {\n    console.error(\n      \"An error occurred while fetching or parsing ArXiv data:\",\n      error,\n    );\n    return null;\n  }\n}\n\nconst ARXIV_CATEGORY_MAP: { [key: string]: string } = {\n  [\"cs.AI\".toLowerCase()]: \"Artificial Intelligence\",\n  [\"cs.AR\".toLowerCase()]: \"Hardware Architecture\",\n  [\"cs.CC\".toLowerCase()]: \"Computational Complexity\",\n  [\"cs.CE\".toLowerCase()]: \"Computational Engineering, Finance, and Science\",\n  [\"cs.CG\".toLowerCase()]: \"Computational Geometry\",\n  [\"cs.CL\".toLowerCase()]: \"Computation and Language\",\n  [\"cs.CR\".toLowerCase()]: \"Cryptography and Security\",\n  [\"cs.CV\".toLowerCase()]: \"Computer Vision and Pattern Recognition\",\n  [\"cs.CY\".toLowerCase()]: \"Computers and Society\",\n  [\"cs.DB\".toLowerCase()]: \"Databases\",\n  [\"cs.DC\".toLowerCase()]: \"Distributed, Parallel, and Cluster Computing\",\n  [\"cs.DL\".toLowerCase()]: \"Digital Libraries\",\n  [\"cs.DM\".toLowerCase()]: \"Discrete Mathematics\",\n  [\"cs.DS\".toLowerCase()]: \"Data Structures and Algorithms\",\n  [\"cs.ET\".toLowerCase()]: \"Emerging Technologies\",\n  [\"cs.FL\".toLowerCase()]: \"Formal Languages and Automata Theory\",\n  [\"cs.GL\".toLowerCase()]: \"General Literature\",\n  [\"cs.GR\".toLowerCase()]: \"Graphics\",\n  [\"cs.GT\".toLowerCase()]: \"Computer Science and Game Theory\",\n  [\"cs.IR\".toLowerCase()]: \"Information Retrieval\",\n  [\"cs.IT\".toLowerCase()]: \"Information Theory\",\n  [\"cs.LG\".toLowerCase()]: \"Machine Learning\",\n  [\"cs.LO\".toLowerCase()]: \"Logic in Computer Science\",\n  [\"cs.MA\".toLowerCase()]: \"Multiagent Systems\",\n  [\"cs.MM\".toLowerCase()]: \"Multimedia\",\n  [\"cs.MS\".toLowerCase()]: \"Mathematical Software\",\n  [\"cs.NA\".toLowerCase()]: \"Numerical Analysis\",\n  [\"cs.NE\".toLowerCase()]: \"Neural and Evolutionary Computing\",\n  [\"cs.NI\".toLowerCase()]: \"Networking and Internet Architecture\",\n  [\"cs.OH\".toLowerCase()]: \"Other Computer Science\",\n  [\"cs.OS\".toLowerCase()]: \"Operating Systems\",\n  [\"cs.PF\".toLowerCase()]: \"Performance\",\n  [\"cs.PL\".toLowerCase()]: \"Programming Languages\",\n  [\"cs.RO\".toLowerCase()]: \"Robotics\",\n  [\"cs.SC\".toLowerCase()]: \"Symbolic Computation\",\n  [\"cs.SD\".toLowerCase()]: \"Sound\",\n  [\"cs.SE\".toLowerCase()]: \"Software Engineering\",\n  [\"cs.SI\".toLowerCase()]: \"Social and Information Networks\",\n  [\"cs.SY\".toLowerCase()]: \"Systems and Control\",\n  [\"econ.EM\".toLowerCase()]: \"Econometrics\",\n  [\"eess.AS\".toLowerCase()]: \"Audio and Speech Processing\",\n  [\"eess.IV\".toLowerCase()]: \"Image and Video Processing\",\n  [\"eess.SP\".toLowerCase()]: \"Signal Processing\",\n  [\"eess.SY\".toLowerCase()]: \"Systems and Control\",\n  [\"math.AC\".toLowerCase()]: \"Commutative Algebra\",\n  [\"math.AG\".toLowerCase()]: \"Algebraic Geometry\",\n  [\"math.AP\".toLowerCase()]: \"Analysis of PDEs\",\n  [\"math.AT\".toLowerCase()]: \"Algebraic Topology\",\n  [\"math.CA\".toLowerCase()]: \"Classical Analysis and ODEs\",\n  [\"math.CO\".toLowerCase()]: \"Combinatorics\",\n  [\"math.CT\".toLowerCase()]: \"Category Theory\",\n  [\"math.CV\".toLowerCase()]: \"Complex Variables\",\n  [\"math.DG\".toLowerCase()]: \"Differential Geometry\",\n  [\"math.DS\".toLowerCase()]: \"Dynamical Systems\",\n  [\"math.FA\".toLowerCase()]: \"Functional Analysis\",\n  [\"math.GM\".toLowerCase()]: \"General Mathematics\",\n  [\"math.GN\".toLowerCase()]: \"General Topology\",\n  [\"math.GR\".toLowerCase()]: \"Group Theory\",\n  [\"math.GT\".toLowerCase()]: \"Geometric Topology\",\n  [\"math.HO\".toLowerCase()]: \"History and Overview\",\n  [\"math.IT\".toLowerCase()]: \"Information Theory\",\n  [\"math.KT\".toLowerCase()]: \"K-Theory and Homology\",\n  [\"math.LO\".toLowerCase()]: \"Logic\",\n  [\"math.MG\".toLowerCase()]: \"Metric Geometry\",\n  [\"math.MP\".toLowerCase()]: \"Mathematical Physics\",\n  [\"math.NA\".toLowerCase()]: \"Numerical Analysis\",\n  [\"math.NT\".toLowerCase()]: \"Number Theory\",\n  [\"math.OA\".toLowerCase()]: \"Operator Algebras\",\n  [\"math.OC\".toLowerCase()]: \"Optimization and Control\",\n  [\"math.PR\".toLowerCase()]: \"Probability\",\n  [\"math.QA\".toLowerCase()]: \"Quantum Algebra\",\n  [\"math.RA\".toLowerCase()]: \"Rings and Algebras\",\n  [\"math.RT\".toLowerCase()]: \"Representation Theory\",\n  [\"math.SG\".toLowerCase()]: \"Symplectic Geometry\",\n  [\"math.SP\".toLowerCase()]: \"Spectral Theory\",\n  [\"math.ST\".toLowerCase()]: \"Statistics Theory\",\n  [\"astro-ph.CO\".toLowerCase()]: \"Cosmology and Nongalactic Astrophysics\",\n  [\"astro-ph.EP\".toLowerCase()]: \"Earth and Planetary Astrophysics\",\n  [\"astro-ph.GA\".toLowerCase()]: \"Astrophysics of Galaxies\",\n  [\"astro-ph.HE\".toLowerCase()]: \"High Energy Astrophysical Phenomena\",\n  [\"astro-ph.IM\".toLowerCase()]: \"Instrumentation and Methods for Astrophysics\",\n  [\"astro-ph.SR\".toLowerCase()]: \"Solar and Stellar Astrophysics\",\n  [\"cond-mat.dis-nn\".toLowerCase()]: \"Disordered Systems and Neural Networks\",\n  [\"cond-mat.mes-hall\".toLowerCase()]: \"Mesoscale and Nanoscale Physics\",\n  [\"cond-mat.mtrl-sci\".toLowerCase()]: \"Materials Science\",\n  [\"cond-mat.other\".toLowerCase()]: \"Other Condensed Matter\",\n  [\"cond-mat.quant-gas\".toLowerCase()]: \"Quantum Gases\",\n  [\"cond-mat.soft\".toLowerCase()]: \"Soft Condensed Matter\",\n  [\"cond-mat.stat-mech\".toLowerCase()]: \"Statistical Mechanics\",\n  [\"cond-mat.str-el\".toLowerCase()]: \"Strongly Correlated Electrons\",\n  [\"cond-mat.supr-con\".toLowerCase()]: \"Superconductivity\",\n  [\"gr-qc\".toLowerCase()]: \"General Relativity and Quantum Cosmology\",\n  [\"hep-ex\".toLowerCase()]: \"High Energy Physics - Experiment\",\n  [\"hep-lat\".toLowerCase()]: \"High Energy Physics - Lattice\",\n  [\"hep-ph\".toLowerCase()]: \"High Energy Physics - Phenomenology\",\n  [\"hep-th\".toLowerCase()]: \"High Energy Physics - Theory\",\n  [\"math-ph\".toLowerCase()]: \"Mathematical Physics\",\n  [\"nlin.AO\".toLowerCase()]: \"Adaptation and Self-Organizing Systems\",\n  [\"nlin.CD\".toLowerCase()]: \"Chaotic Dynamics\",\n  [\"nlin.CG\".toLowerCase()]: \"Cellular Automata and Lattice Gases\",\n  [\"nlin.PS\".toLowerCase()]: \"Pattern Formation and Solitons\",\n  [\"nlin.SI\".toLowerCase()]: \"Exactly Solvable and Integrable Systems\",\n  [\"nucl-ex\".toLowerCase()]: \"Nuclear Experiment\",\n  [\"nucl-th\".toLowerCase()]: \"Nuclear Theory\",\n  [\"physics.acc-ph\".toLowerCase()]: \"Accelerator Physics\",\n  [\"physics.ao-ph\".toLowerCase()]: \"Atmospheric and Oceanic Physics\",\n  [\"physics.app-ph\".toLowerCase()]: \"Applied Physics\",\n  [\"physics.atm-clus\".toLowerCase()]: \"Atomic and Molecular Clusters\",\n  [\"physics.atom-ph\".toLowerCase()]: \"Atomic Physics\",\n  [\"physics.bio-ph\".toLowerCase()]: \"Biological Physics\",\n  [\"physics.chem-ph\".toLowerCase()]: \"Chemical Physics\",\n  [\"physics.class-ph\".toLowerCase()]: \"Classical Physics\",\n  [\"physics.comp-ph\".toLowerCase()]: \"Computational Physics\",\n  [\"physics.data-an\".toLowerCase()]:\n    \"Data Analysis, Statistics and Probability\",\n  [\"physics.flu-dyn\".toLowerCase()]: \"Fluid Dynamics\",\n  [\"physics.gen-ph\".toLowerCase()]: \"General Physics\",\n  [\"physics.geo-ph\".toLowerCase()]: \"Geophysics\",\n  [\"physics.hist-ph\".toLowerCase()]: \"History and Philosophy of Physics\",\n  [\"physics.ins-det\".toLowerCase()]: \"Instrumentation and Detectors\",\n  [\"physics.med-ph\".toLowerCase()]: \"Medical Physics\",\n  [\"physics.optics\".toLowerCase()]: \"Optics\",\n  [\"physics.ed-ph\".toLowerCase()]: \"Physics Education\",\n  [\"physics.plasm-ph\".toLowerCase()]: \"Plasma Physics\",\n  [\"physics.pop-ph\".toLowerCase()]: \"Popular Physics\",\n  [\"physics.soc-ph\".toLowerCase()]: \"Physics and Society\",\n  [\"physics.space-ph\".toLowerCase()]: \"Space Physics\",\n  [\"quant-ph\".toLowerCase()]: \"Quantum Physics\",\n  [\"q-bio.BM\".toLowerCase()]: \"Biomolecules\",\n  [\"q-bio.CB\".toLowerCase()]: \"Cell Behavior\",\n  [\"q-bio.GN\".toLowerCase()]: \"Genomics\",\n  [\"q-bio.MN\".toLowerCase()]: \"Molecular Networks\",\n  [\"q-bio.NC\".toLowerCase()]: \"Neurons and Cognition\",\n  [\"q-bio.OT\".toLowerCase()]: \"Other Quantitative Biology\",\n  [\"q-bio.PE\".toLowerCase()]: \"Populations and Evolution\",\n  [\"q-bio.QM\".toLowerCase()]: \"Quantitative Methods\",\n  [\"q-bio.SC\".toLowerCase()]: \"Subcellular Processes\",\n  [\"q-bio.TO\".toLowerCase()]: \"Tissues and Organs\",\n  [\"q-fin.CP\".toLowerCase()]: \"Computational Finance\",\n  [\"q-fin.EC\".toLowerCase()]: \"Economics\",\n  [\"q-fin.GN\".toLowerCase()]: \"General Finance\",\n  [\"q-fin.MF\".toLowerCase()]: \"Mathematical Finance\",\n  [\"q-fin.PM\".toLowerCase()]: \"Portfolio Management\",\n  [\"q-fin.PR\".toLowerCase()]: \"Pricing of Securities\",\n  [\"q-fin.RM\".toLowerCase()]: \"Risk Management\",\n  [\"q-fin.ST\".toLowerCase()]: \"Statistical Finance\",\n  [\"q-fin.TR\".toLowerCase()]: \"Trading and Market Microstructure\",\n  [\"stat.AP\".toLowerCase()]: \"Applications\",\n  [\"stat.CO\".toLowerCase()]: \"Computation\",\n  [\"stat.ME\".toLowerCase()]: \"Methodology\",\n  [\"stat.ML\".toLowerCase()]: \"Machine Learning\",\n  [\"stat.OT\".toLowerCase()]: \"Other Statistics\",\n  [\"stat.TH\".toLowerCase()]: \"Theory\",\n};\n\n/**\n * Fetches the text content of a PDF file.\n *\n * @param url - The URL of the PDF file.\n * @returns A promise that resolves to the text content of the PDF file, or null if the request fails or the file is not a PDF file.\n */\nexport async function fetchPdfText(url: string): Promise<PdfData | null> {\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      console.error(`HTTP error! status: ${response.status} for URL: ${url}`);\n      return null;\n    }\n\n    const contentType = response.headers.get(\"content-type\");\n    if (!contentType || !contentType.includes(\"application/pdf\")) {\n      console.error(\n        `Invalid content type: ${contentType} for URL: ${url}. Expected application/pdf.`,\n      );\n      return null;\n    }\n\n    const arrayBuffer = await response.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n\n    const data = await PdfData.extract(buffer, {\n      verbosity: VerbosityLevel.ERRORS,\n    });\n\n    return data;\n  } catch (error) {\n    console.error(`Failed to fetch or parse PDF from ${url}:`, error);\n    return null;\n  }\n}\n"],"names":[],"mappings":"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,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,QAAQ,WAAW,GAAG,EAAE;IACzB,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,WAAW,GAAG,EAAE;IAC3B,CAAC,UAAU,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","debugId":null}},
    {"offset": {"line": 1001, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/ArticlePreview.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ArticlePreview\": \"ArticlePreview-module__rjMMPa__ArticlePreview\",\n  \"summary\": \"ArticlePreview-module__rjMMPa__summary\",\n  \"tag\": \"ArticlePreview-module__rjMMPa__tag\",\n  \"tags\": \"ArticlePreview-module__rjMMPa__tags\",\n  \"title\": \"ArticlePreview-module__rjMMPa__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1060, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/ArticlePreview.tsx"],"sourcesContent":["import { ArticlePreview } from \"@/analysis/ontology\";\nimport styles from \"./ArticlePreview.module.css\";\nimport Link from \"next/link\";\nimport Markdown from \"react-markdown\";\n\nexport default function ArticlePreviewComponent(props: {\n  preview: ArticlePreview;\n}) {\n  return (\n    <div className={styles.ArticlePreview}>\n      <div className={styles.title}>\n        <Link href={props.preview.metadata.url} target=\"_blank\">\n          {props.preview.metadata.title ?? props.preview.metadata.url}\n        </Link>\n      </div>\n      {props.preview.tags && (\n        <div className={styles.tags}>\n          {props.preview.tags.map((tag, j) => (\n            <Link className={styles.tag} key={j} href={`/tag/${encodeURIComponent(tag)}`}>\n              {tag}\n            </Link>\n          ))}\n        </div>\n      )}\n      {props.preview.summary && (\n        <div className={styles.summary}>\n          <Markdown>{props.preview.summary}</Markdown>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;AAEe,SAAS,wBAAwB,KAE/C;IACC,qBACE,8OAAC;QAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,cAAc;;0BACnC,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,KAAK;0BAC1B,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAM,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;oBAAE,QAAO;8BAC5C,MAAM,OAAO,CAAC,QAAQ,CAAC,KAAK,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;;;;;;;;;;;YAG9D,MAAM,OAAO,CAAC,IAAI,kBACjB,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,IAAI;0BACxB,MAAM,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,kBAC5B,8OAAC,4JAAA,CAAA,UAAI;wBAAC,WAAW,8IAAA,CAAA,UAAM,CAAC,GAAG;wBAAU,MAAM,CAAC,KAAK,EAAE,mBAAmB,MAAM;kCACzE;uBAD+B;;;;;;;;;;YAMvC,MAAM,OAAO,CAAC,OAAO,kBACpB,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,OAAO;0BAC5B,cAAA,8OAAC,wLAAA,CAAA,UAAQ;8BAAE,MAAM,OAAO,CAAC,OAAO;;;;;;;;;;;;;;;;;AAK1C","debugId":null}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/all/[pageIndex]/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"Page\": \"page-module__kXvtoq__Page\",\n  \"button\": \"page-module__kXvtoq__button\",\n  \"content\": \"page-module__kXvtoq__content\",\n  \"controls\": \"page-module__kXvtoq__controls\",\n  \"disabled\": \"page-module__kXvtoq__disabled\",\n  \"header\": \"page-module__kXvtoq__header\",\n  \"item\": \"page-module__kXvtoq__item\",\n  \"previews\": \"page-module__kXvtoq__previews\",\n  \"separator\": \"page-module__kXvtoq__separator\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1145, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/Header.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"Header\": \"Header-module__6DZwPG__Header\",\n  \"item\": \"Header-module__6DZwPG__item\",\n  \"separator\": \"Header-module__6DZwPG__separator\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1154, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/Header.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\nimport styles from \"./Header.module.css\";\nimport Link from \"next/link\";\n\nexport default function Header(props: { path: ReactNode[] }) {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.item}>\n        <Link href=\"/\">url-notes</Link>\n      </div>\n      {props.path.map((item, i) => [\n        <div className={styles.separator} key={`separator-${i}`}>\n          {\"|\"}\n        </div>,\n        <div className={styles.item} key={`item-${i}`}>\n          {item}\n        </div>,\n      ])}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;;AAEe,SAAS,OAAO,KAA4B;IACzD,qBACE,8OAAC;QAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,MAAM;;0BAC3B,8OAAC;gBAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,IAAI;0BACzB,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;8BAAI;;;;;;;;;;;YAEhB,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,IAAM;kCAC3B,8OAAC;wBAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,SAAS;kCAC7B;uBADoC,CAAC,UAAU,EAAE,GAAG;;;;;kCAGvD,8OAAC;wBAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,IAAI;kCACxB;uBAD+B,CAAC,KAAK,EAAE,GAAG;;;;;iBAG9C;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 1211, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/app/all/%5BpageIndex%5D/page.tsx"],"sourcesContent":["import {\n  readArticleMetadata,\n  readArticleSummary,\n  readArticleTags,\n} from \"@/analysis/article\";\nimport paths from \"@/analysis/paths\";\nimport ArticlePreviewComponent from \"@/component/ArticlePreview\";\nimport { Metadata } from \"next\";\nimport Link from \"next/link\";\nimport styles from \"./page.module.css\";\nimport { ArticlePreview } from \"@/analysis/ontology\";\nimport { cache } from \"react\";\nimport Header from \"@/component/Header\";\n\nconst config = {\n  articles_per_page: 10,\n};\n\ntype Params = {\n  pageIndex: string;\n};\n\ntype Props = {\n  params: Promise<Params>;\n};\n\nconst getCachedData = cache(async () => {\n  const ids_all = await paths.get_articleIds();\n\n  const mds_all = (\n    await Promise.all(ids_all.map(async (id) => await readArticleMetadata(id)))\n  ).filter((md) => md !== null);\n  // sorted from newest (higher `addedTime` value) to oldest\n  mds_all.sort((x, y) => y.addedTime - x.addedTime);\n\n  const previews_all: ArticlePreview[] = await Promise.all(\n    mds_all.map(async (md) => {\n      return {\n        metadata: md,\n        summary: (await readArticleSummary(md.id)) ?? undefined,\n        tags: (await readArticleTags(md.id)) ?? undefined,\n      };\n    }),\n  );\n\n  const pageIndex_max =\n    Math.ceil(ids_all.length / config.articles_per_page) - 1;\n\n  const count_pages = Math.ceil(ids_all.length / config.articles_per_page);\n\n  return { ids_all, mds_all, previews_all, pageIndex_max, count_pages };\n});\n\nfunction get_title(pageIndex: number, pageIndex_max: number) {\n  return `url-notes | all | page ${pageIndex + 1} of ${pageIndex_max + 1}`;\n}\n\nexport async function generateStaticParams(): Promise<Params[]> {\n  const { count_pages } = await getCachedData();\n  const ps: Params[] = [];\n  for (let i = 0; i < count_pages; i++) {\n    ps.push({ pageIndex: `${i}` });\n  }\n  return ps;\n}\n\nexport async function generateMetadata(props: Props): Promise<Metadata> {\n  const params = await props.params;\n  const pageIndex = Number(params.pageIndex);\n  const { pageIndex_max } = await getCachedData();\n  return {\n    title: get_title(pageIndex, pageIndex_max),\n  };\n}\n\nexport default async function Page(props: Props) {\n  const params = await props.params;\n  const pageIndex = Number(params.pageIndex);\n  const { previews_all, pageIndex_max } = await getCachedData();\n  const previews = previews_all.slice(\n    pageIndex * config.articles_per_page,\n    (pageIndex + 1) * config.articles_per_page,\n  );\n\n  return (\n    <div className={styles.Page}>\n      <Header\n        path={[\n          <Link href=\"/all/0\" key={0}>\n            all\n          </Link>,\n          <span key={1}>\n            page {pageIndex + 1} of {pageIndex_max + 1}\n          </span>,\n        ]}\n      />\n      <div className={styles.content}>\n        <div className={styles.previews}>\n          {previews.map((preview, i) => (\n            <ArticlePreviewComponent key={i} preview={preview} />\n          ))}\n        </div>\n      </div>\n      <div className={styles.controls}>\n        {0 < Number(params.pageIndex) ? (\n          <Link\n            className={styles.button}\n            href={`/all/${Number(params.pageIndex) - 1}`}\n          >\n            newer\n          </Link>\n        ) : (\n          <div className={[styles.button, styles.disabled].join(\" \")}>\n            newer\n          </div>\n        )}\n        {Number(params.pageIndex) < pageIndex_max ? (\n          <Link\n            className={styles.button}\n            href={`/all/${Number(params.pageIndex) + 1}`}\n          >\n            older\n          </Link>\n        ) : (\n          <div className={[styles.button, styles.disabled].join(\" \")}>\n            older\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}