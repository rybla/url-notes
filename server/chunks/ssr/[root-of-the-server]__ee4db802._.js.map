{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/utility.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inspect } from \"util\";\n\nexport function trim(s: string): string {\n  return s.trim();\n}\n\nexport function stringify(x: any): string {\n  return JSON.stringify(x, null, 4);\n}\n\nexport function do_<A>(k: () => A): A {\n  return k();\n}\n\nexport function formatDate(date: Date): string {\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nexport function formatDateTime(date: Date): string {\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  const hours = date.getHours().toString().padStart(2, \"0\");\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day},${hours}:${minutes}`;\n}\n\nexport function fromFormattedDateTime(s: string): Date | undefined {\n  const [dateStr, timeStr] = s.split(\",\");\n  if (dateStr === undefined || timeStr === undefined) return undefined;\n  const [year, month, day] = dateStr.split(\"-\").map(Number);\n  if (year === undefined || month === undefined || day === undefined)\n    return undefined;\n  const [hours, minutes] = timeStr.split(\":\").map(Number);\n  if (hours === undefined || minutes === undefined) return undefined;\n  return new Date(year, month - 1, day, hours, minutes);\n}\n\nexport function show<A>(x: A): string {\n  return inspect(x, {\n    colors: true,\n    compact: false,\n    depth: undefined,\n    sorted: false,\n  });\n}\n\nexport function parseDate(s: string): Date | null {\n  const date = new Date(s);\n  if (isNaN(date.getTime())) return null;\n  return date;\n}\n\nexport function normString(s: string | undefined): string | undefined {\n  if (s === undefined) return undefined;\n  s = s.trim();\n  if (s.length === 0) return undefined;\n  return s;\n}\n\nexport function encodeURIComponent_v2(s: string): string {\n  return encodeURIComponent(s.replaceAll(\" \", \"_\"));\n}\n\nexport function intercalate<A>(sep: (i: number) => A[], xs: A[]): A[] {\n  const ys = [];\n  for (let i = 0; i < xs.length; i++) {\n    if (i > 0) ys.push(...sep(i - 1));\n    ys.push(xs[i]);\n  }\n  return ys;\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;;;;;;;AAErD;;AAEO,SAAS,KAAK,CAAS;IAC5B,OAAO,EAAE,IAAI;AACf;AAEO,SAAS,UAAU,CAAM;IAC9B,OAAO,KAAK,SAAS,CAAC,GAAG,MAAM;AACjC;AAEO,SAAS,IAAO,CAAU;IAC/B,OAAO;AACT;AAEO,SAAS,WAAW,IAAU;IACnC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAEO,SAAS,eAAe,IAAU;IACvC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,MAAM,QAAQ,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACrD,MAAM,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACzD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,EAAE,SAAS;AACtD;AAEO,SAAS,sBAAsB,CAAS;IAC7C,MAAM,CAAC,SAAS,QAAQ,GAAG,EAAE,KAAK,CAAC;IACnC,IAAI,YAAY,aAAa,YAAY,WAAW,OAAO;IAC3D,MAAM,CAAC,MAAM,OAAO,IAAI,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAClD,IAAI,SAAS,aAAa,UAAU,aAAa,QAAQ,WACvD,OAAO;IACT,MAAM,CAAC,OAAO,QAAQ,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAChD,IAAI,UAAU,aAAa,YAAY,WAAW,OAAO;IACzD,OAAO,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,OAAO;AAC/C;AAEO,SAAS,KAAQ,CAAI;IAC1B,OAAO,CAAA,GAAA,iGAAA,CAAA,UAAO,AAAD,EAAE,GAAG;QAChB,QAAQ;QACR,SAAS;QACT,OAAO;QACP,QAAQ;IACV;AACF;AAEO,SAAS,UAAU,CAAS;IACjC,MAAM,OAAO,IAAI,KAAK;IACtB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;IAClC,OAAO;AACT;AAEO,SAAS,WAAW,CAAqB;IAC9C,IAAI,MAAM,WAAW,OAAO;IAC5B,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,MAAM,KAAK,GAAG,OAAO;IAC3B,OAAO;AACT;AAEO,SAAS,sBAAsB,CAAS;IAC7C,OAAO,mBAAmB,EAAE,UAAU,CAAC,KAAK;AAC9C;AAEO,SAAS,YAAe,GAAuB,EAAE,EAAO;IAC7D,MAAM,KAAK,EAAE;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,MAAM,EAAE,IAAK;QAClC,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI;QAC9B,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE;IACf;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/console.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport path from \"path\";\nimport { formatDateTime } from \"./utility\";\n\nexport function log(...xs: any[]) {\n  console.log(`[${formatDateTime(new Date())}]`, ...xs);\n}\n\nexport function error(...xs: any[]) {\n  console.error(`[${formatDateTime(new Date())}]`, ...xs);\n}\n\nexport function makeConsole(args: { __filename: string }) {\n  const prefix = `[${path.basename(args.__filename)}]`;\n  return {\n    log(...xs: any[]) {\n      log(prefix, ...xs);\n    },\n    error(...xs: any[]) {\n      error(prefix, ...xs);\n    },\n  } as const;\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AACrD;AACA;;;AAEO,SAAS,IAAI,GAAG,EAAS;IAC9B,QAAQ,GAAG,CAAC,CAAC,CAAC,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,CAAC,CAAC,KAAK;AACpD;AAEO,SAAS,MAAM,GAAG,EAAS;IAChC,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,CAAC,CAAC,KAAK;AACtD;AAEO,SAAS,YAAY,IAA4B;IACtD,MAAM,SAAS,CAAC,CAAC,EAAE,iGAAA,CAAA,UAAI,CAAC,QAAQ,CAAC,KAAK,UAAU,EAAE,CAAC,CAAC;IACpD,OAAO;QACL,KAAI,GAAG,EAAS;YACd,IAAI,WAAW;QACjB;QACA,OAAM,GAAG,EAAS;YAChB,MAAM,WAAW;QACnB;IACF;AACF","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/file.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type z from \"zod\";\nimport * as fs from \"fs/promises\";\nimport path from \"path\";\n\nexport async function readTextFile(filepath: string): Promise<string | null> {\n  try {\n    return await fs.readFile(filepath, { encoding: \"utf8\" });\n  } catch {\n    return null;\n  }\n}\n\nexport async function writeTextFile(\n  filepath: string,\n  content: string,\n): Promise<void> {\n  await fs.mkdir(path.dirname(filepath), { recursive: true });\n  await fs.writeFile(filepath, content, { encoding: \"utf8\" });\n}\n\nexport async function readJsonFile<A>(\n  filepath: string,\n  schema: z.ZodSchema<A>,\n): Promise<z.ZodSafeParseResult<A> | null> {\n  let content: string;\n  try {\n    content = await fs.readFile(filepath, { encoding: \"utf8\" });\n  } catch {\n    return null;\n  }\n  // makes sure to still throw error if we cant even parse the JSON\n  try {\n    return schema.safeParseAsync(JSON.parse(content));\n  } catch (e) {\n    throw new Error(`Failed to parse JSON file ${filepath}: ${e}`);\n  }\n}\n\nexport async function writeJsonFile(\n  filepath: string,\n  data: any,\n): Promise<void> {\n  await fs.mkdir(path.dirname(filepath), { recursive: true });\n  await fs.writeFile(filepath, JSON.stringify(data, null, 4), {\n    encoding: \"utf8\",\n  });\n}\n\nexport async function renameFile(\n  filepath_source: string,\n  filepath_target: string,\n) {\n  await fs.mkdir(path.dirname(filepath_target), { recursive: true });\n  await fs.rename(filepath_source, filepath_target);\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;AAErD;AACA;;;AAEO,eAAe,aAAa,QAAgB;IACjD,IAAI;QACF,OAAO,MAAM,qHAAA,CAAA,WAAW,CAAC,UAAU;YAAE,UAAU;QAAO;IACxD,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,cACpB,QAAgB,EAChB,OAAe;IAEf,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,WAAW;QAAE,WAAW;IAAK;IACzD,MAAM,qHAAA,CAAA,YAAY,CAAC,UAAU,SAAS;QAAE,UAAU;IAAO;AAC3D;AAEO,eAAe,aACpB,QAAgB,EAChB,MAAsB;IAEtB,IAAI;IACJ,IAAI;QACF,UAAU,MAAM,qHAAA,CAAA,WAAW,CAAC,UAAU;YAAE,UAAU;QAAO;IAC3D,EAAE,OAAM;QACN,OAAO;IACT;IACA,iEAAiE;IACjE,IAAI;QACF,OAAO,OAAO,cAAc,CAAC,KAAK,KAAK,CAAC;IAC1C,EAAE,OAAO,GAAG;QACV,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,EAAE,EAAE,GAAG;IAC/D;AACF;AAEO,eAAe,cACpB,QAAgB,EAChB,IAAS;IAET,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,WAAW;QAAE,WAAW;IAAK;IACzD,MAAM,qHAAA,CAAA,YAAY,CAAC,UAAU,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;QAC1D,UAAU;IACZ;AACF;AAEO,eAAe,WACpB,eAAuB,EACvB,eAAuB;IAEvB,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,kBAAkB;QAAE,WAAW;IAAK;IAChE,MAAM,qHAAA,CAAA,SAAS,CAAC,iBAAiB;AACnC","debugId":null}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/ontology.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as rss_parser from \"rss-parser\";\nimport z from \"zod\";\nimport { parseDate } from \"./utility\";\n\nexport const FuzzyDate = z.string().transform((s) => {\n  const d = parseDate(s);\n  if (!d) return s;\n  return d;\n});\n\nexport type Article = z.infer<typeof Article>;\n\nexport const Article = z.object({\n  title: z.string().optional().describe(\"The title of the article\"),\n  content: z\n    .string()\n    .optional()\n    .describe(\"The HTML string of processed article content\"),\n  textContent: z\n    .string()\n    .optional()\n    .describe(\n      \"The text content of the article, with all the HTML tags removed\",\n    ),\n  length: z\n    .number()\n    .optional()\n    .describe(\"The length of an article, in characters\"),\n  excerpt: z\n    .string()\n    .optional()\n    .describe(\"The article description, or short excerpt from the content\"),\n  byline: z.string().optional().describe(\"The author metadata\"),\n  dir: z.string().optional().describe(\"The content direction\"),\n  siteName: z.string().optional().describe(\"The name of the site\"),\n  lang: z.string().optional().describe(\"The content language\"),\n  publishedTime: FuzzyDate.optional().describe(\"The published time\"),\n  summary: z\n    .string()\n    .optional()\n    .describe(\"A short summary of the article content\"),\n  tags: z\n    .array(z.string())\n    .optional()\n    .describe(\"A list of categorizational tags for the article content\"),\n  url: z.url().optional().describe(\"The URL of the article\"),\n  rssFeedConfig: z.lazy(() => RssFeedConfig).optional(),\n});\n\nexport type ArticleContent = z.infer<typeof ArticleContent>;\nexport const ArticleContent = z.string();\n\nexport type ArticleMetadata = z.infer<typeof ArticleMetadata>;\nexport const ArticleMetadata = z.object({\n  id: z.string(),\n  title: z.optional(z.string()),\n  url: z.string(),\n  addedDate: z.iso.date(),\n  addedTime: z.number(),\n  publishedTime: z.optional(FuzzyDate),\n});\n\nexport type ArticleSummary = z.infer<typeof ArticleSummary>;\nexport const ArticleSummary = z.string();\n\nexport type ArticleTags = z.infer<typeof ArticleTags>;\nexport const ArticleTags = z.array(z.string());\n\nexport type ArticlePlus = z.infer<typeof ArticlePlus>;\nexport const ArticlePlus = z.object({\n  id: z.string(),\n  article: Article,\n  metadata: ArticleMetadata,\n  content: z.optional(ArticleContent),\n  summary: z.optional(ArticleSummary),\n  tags: z.optional(ArticleTags),\n});\n\nexport type ArticlePreview = {\n  metadata: ArticleMetadata;\n  summary?: ArticleSummary;\n  tags?: ArticleTags;\n};\n\n/**\n * RSS feed config.\n *\n * Example:\n * ```json\n * {\n *   \"name\": \"Hacker News Top\",\n *   \"feedUrl\": \"https://hnrss.org/best\",\n *   \"maxItems\": 20\n * }\n * ```\n */\nexport type RssFeedConfig = z.infer<typeof RssFeedConfig>;\nexport const RssFeedConfig = z.object({\n  name: z.string().nonempty(),\n  feedUrl: z.url(),\n  maxItems: z.optional(z.number().min(1)),\n  filters: z.optional(\n    z.object({\n      keywords: z.optional(z.array(z.string())),\n      topics: z.optional(z.array(z.string())),\n    }),\n  ),\n});\n\n/**\n * RSS feed.\n *\n * Example:\n * ```json\n * {\n *  items: [\n *    {\n *      creator: \"rd\",\n *      title: \"GPT-5\",\n *      link: \"https://openai.com/gpt-5/\",\n *      pubDate: \"Thu, 07 Aug 2025 17:00:21 +0000\",\n *      \"dc:creator\": \"rd\",\n *      comments: \"https://news.ycombinator.com/item?id=44826997\",\n *      content: \"\\n<p><a href=\\\"https://www.youtube.com/watch?v=0Uu_VJeVVfo\\\" rel=\\\"nofollow\\\">https://www.youtube.com/watch?v=0Uu_VJeVVfo</a></p>\\n<hr>\\n<p>Comments URL: <a href=\\\"https://news.ycombinator.com/item?id=44826997\\\">https://news.ycombinator.com/item?id=44826997</a></p>\\n<p>Points: 1323</p>\\n<p># Comments: 1583</p>\\n\",\n *      contentSnippet: \"https://www.youtube.com/watch?v=0Uu_VJeVVfo\\nComments URL: https://news.ycombinator.com/item?id=44826997\\nPoints: 1323\\n# Comments: 1583\",\n *      guid: \"https://news.ycombinator.com/item?id=44826997\",\n *      isoDate: \"2025-08-07T17:00:21.000Z\",\n *    }\n *  ],\n *  feedUrl: \"https://hnrss.org/best\",\n *  paginationLinks: {\n *    self: \"https://hnrss.org/best\",\n *  },\n *  title: \"Hacker News: Best\",\n *  description: \"Hacker News RSS\",\n *  generator: \"hnrss v2.1.1\",\n *  link: \"https://news.ycombinator.com/best\",\n *  lastBuildDate: \"Fri, 08 Aug 2025 00:04:01 +0000\",\n *  docs: \"https://hnrss.org/\",\n * }\n * ```\n */\nexport type RssFeed = {\n  config: RssFeedConfig;\n  rss: rss_parser.Output<{ [key: string]: any }>;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/paths.ts"],"sourcesContent":["import * as fs from \"fs/promises\";\nimport path from \"path\";\n\n// input\nconst dirpath_feed = path.join(\"input\", \"feed\");\n// output-1\nconst dirpath_new_article = path.join(\"output-1\", \"new\", \"article\");\nconst dirpath_new_article_metadata = path.join(\n  \"output-1\",\n  \"new\",\n  \"article_metadata\",\n);\n\nconst dirpath_ignored_article = path.join(\"output-1\", \"ignored\", \"article\");\nconst dirpath_ignored_article_metadata = path.join(\n  \"output-1\",\n  \"ignored\",\n  \"article_metadata\",\n);\nconst dirpath_article = path.join(\"output-1\", \"old\", \"article\");\nconst dirpath_article_metadata = path.join(\n  \"output-1\",\n  \"old\",\n  \"article_metadata\",\n);\n\n// output-2\nconst dirpath_article_content = path.join(\"output-2\", \"article_content\");\nconst dirpath_article_summary = path.join(\"output-2\", \"article_summary\");\nconst dirpath_article_tags = path.join(\"output-2\", \"article_tags\");\n\nexport const paths = {\n  // external files\n  filepaths_articleUrlLists: [\n    \"/Users/henry/Library/Mobile\\ Documents/com\\~apple\\~CloudDocs/url-notes/article_urls.txt\",\n  ],\n  // feed\n  dirpath_feed,\n  async get_filepaths_of_feeds(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_feed, { encoding: \"utf8\", recursive: false })\n    ).flatMap((fn) =>\n      fn.endsWith(\".feed.json\") ? [path.join(dirpath_feed, fn)] : [],\n    );\n  },\n\n  // article\n  dirpath_new_article,\n  dirpath_new_article_metadata,\n  dirpath_ignored_article,\n  dirpath_ignored_article_metadata,\n  dirpath_article,\n  dirpath_article_metadata,\n  dirpath_article_content,\n  dirpath_article_summary,\n  dirpath_article_tags,\n  async get_articleIds_new(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_new_article, {\n        encoding: \"utf8\",\n        recursive: false,\n      })\n    ).flatMap((fn) =>\n      fn.endsWith(\".json\") ? [path.basename(fn, \".json\")] : [],\n    );\n  },\n  filepath_article_new(articleId: string) {\n    return path.join(dirpath_new_article, `${articleId}.json`);\n  },\n  filepath_article_new_metadata(articleId: string) {\n    return path.join(dirpath_new_article_metadata, `${articleId}.json`);\n  },\n  filepath_articleIds_ignored: path.join(\"output-1\", \"articleIds_ignored.json\"),\n  filepath_article_ignored(articleId: string) {\n    return path.join(dirpath_ignored_article, `${articleId}.json`);\n  },\n  filepath_article_ignored_metadata(articleId: string) {\n    return path.join(dirpath_ignored_article_metadata, `${articleId}.json`);\n  },\n  filepath_article(articleId: string) {\n    return path.join(dirpath_article, `${articleId}.json`);\n  },\n  filepath_article_metadata(articleId: string) {\n    return path.join(dirpath_article_metadata, `${articleId}.json`);\n  },\n  async get_articleIds(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_article, { encoding: \"utf8\", recursive: false })\n    ).flatMap((fn) =>\n      fn.endsWith(\".json\") ? [path.basename(fn, \".json\")] : [],\n    );\n  },\n  filepath_article_content(articleId: string) {\n    return path.join(dirpath_article_content, `${articleId}.md`);\n  },\n  filepath_article_summary(articleId: string) {\n    return path.join(dirpath_article_summary, `${articleId}.md`);\n  },\n  filepath_article_tags(articleId: string) {\n    return path.join(dirpath_article_tags, `${articleId}.csv`);\n  },\n};\n\nexport default paths;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/article.ts"],"sourcesContent":["import { error } from \"./console\";\nimport { readJsonFile, readTextFile } from \"./file\";\nimport { Article, ArticleMetadata, ArticlePlus } from \"./ontology\";\nimport paths from \"./paths\";\n\nexport async function readArticle(articleId: string): Promise<Article | null> {\n  const parseResult_article = await readJsonFile(\n    paths.filepath_article(articleId),\n    Article,\n  );\n  if (!parseResult_article) {\n    error(`Failed to read article: ${articleId}`);\n    return null;\n  }\n  if (!parseResult_article.data) {\n    error(\n      `Failed to parse article: ${articleId}\\n${parseResult_article.error}`,\n    );\n    return null;\n  }\n  const article: Article = parseResult_article.data;\n  return article;\n}\n\nexport async function readArticle_new(\n  articleId: string,\n): Promise<Article | null> {\n  const parseResult_article = await readJsonFile(\n    paths.filepath_article_new(articleId),\n    Article,\n  );\n  if (!parseResult_article) {\n    error(`Failed to read article: ${articleId}`);\n    return null;\n  }\n  if (!parseResult_article.data) {\n    error(\n      `Failed to parse article: ${articleId}\\n${parseResult_article.error}`,\n    );\n    return null;\n  }\n  const article: Article = parseResult_article.data;\n  return article;\n}\n\nexport async function readArticleMetadata(\n  articleId: string,\n): Promise<ArticleMetadata | null> {\n  const result = await readJsonFile(\n    paths.filepath_article_metadata(articleId),\n    ArticleMetadata,\n  );\n  if (!result) return null;\n  return result.success ? result.data : null;\n}\n\nexport async function readArticleContent(\n  articleId: string,\n): Promise<string | null> {\n  return await readTextFile(paths.filepath_article_content(articleId));\n}\n\nexport async function readArticleSummary(\n  articleId: string,\n): Promise<string | null> {\n  return await readTextFile(paths.filepath_article_summary(articleId));\n}\n\nexport async function readArticleTags(\n  articleId: string,\n): Promise<string[] | null> {\n  const tags_string = await readTextFile(\n    paths.filepath_article_tags(articleId),\n  );\n  if (!tags_string) return null;\n  return tags_string.split(\",\").map((s) => s.trim());\n}\n\nexport async function readArticlePlus(\n  articleId: string,\n): Promise<ArticlePlus | null> {\n  const article = await readArticle(articleId);\n  if (!article) return null;\n  const metadata = await readArticleMetadata(articleId);\n  if (!metadata) return null;\n  const content = (await readArticleContent(articleId)) ?? undefined;\n  const summary = (await readArticleSummary(articleId)) ?? undefined;\n  const tags = (await readArticleTags(articleId)) ?? undefined;\n  const articlePlus: ArticlePlus = {\n    id: articleId,\n    article,\n    metadata,\n    content,\n    summary,\n    tags,\n  };\n  return articlePlus;\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,YAAY,SAAiB;IACjD,MAAM,sBAAsB,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAC3C,wHAAA,CAAA,UAAK,CAAC,gBAAgB,CAAC,YACvB,2HAAA,CAAA,UAAO;IAET,IAAI,CAAC,qBAAqB;QACxB,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EAAE,CAAC,wBAAwB,EAAE,WAAW;QAC5C,OAAO;IACT;IACA,IAAI,CAAC,oBAAoB,IAAI,EAAE;QAC7B,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EACF,CAAC,yBAAyB,EAAE,UAAU,EAAE,EAAE,oBAAoB,KAAK,EAAE;QAEvE,OAAO;IACT;IACA,MAAM,UAAmB,oBAAoB,IAAI;IACjD,OAAO;AACT;AAEO,eAAe,gBACpB,SAAiB;IAEjB,MAAM,sBAAsB,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAC3C,wHAAA,CAAA,UAAK,CAAC,oBAAoB,CAAC,YAC3B,2HAAA,CAAA,UAAO;IAET,IAAI,CAAC,qBAAqB;QACxB,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EAAE,CAAC,wBAAwB,EAAE,WAAW;QAC5C,OAAO;IACT;IACA,IAAI,CAAC,oBAAoB,IAAI,EAAE;QAC7B,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EACF,CAAC,yBAAyB,EAAE,UAAU,EAAE,EAAE,oBAAoB,KAAK,EAAE;QAEvE,OAAO;IACT;IACA,MAAM,UAAmB,oBAAoB,IAAI;IACjD,OAAO;AACT;AAEO,eAAe,oBACpB,SAAiB;IAEjB,MAAM,SAAS,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAC9B,wHAAA,CAAA,UAAK,CAAC,yBAAyB,CAAC,YAChC,2HAAA,CAAA,kBAAe;IAEjB,IAAI,CAAC,QAAQ,OAAO;IACpB,OAAO,OAAO,OAAO,GAAG,OAAO,IAAI,GAAG;AACxC;AAEO,eAAe,mBACpB,SAAiB;IAEjB,OAAO,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAAE,wHAAA,CAAA,UAAK,CAAC,wBAAwB,CAAC;AAC3D;AAEO,eAAe,mBACpB,SAAiB;IAEjB,OAAO,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAAE,wHAAA,CAAA,UAAK,CAAC,wBAAwB,CAAC;AAC3D;AAEO,eAAe,gBACpB,SAAiB;IAEjB,MAAM,cAAc,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EACnC,wHAAA,CAAA,UAAK,CAAC,qBAAqB,CAAC;IAE9B,IAAI,CAAC,aAAa,OAAO;IACzB,OAAO,YAAY,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;AACjD;AAEO,eAAe,gBACpB,SAAiB;IAEjB,MAAM,UAAU,MAAM,YAAY;IAClC,IAAI,CAAC,SAAS,OAAO;IACrB,MAAM,WAAW,MAAM,oBAAoB;IAC3C,IAAI,CAAC,UAAU,OAAO;IACtB,MAAM,UAAU,AAAC,MAAM,mBAAmB,cAAe;IACzD,MAAM,UAAU,AAAC,MAAM,mBAAmB,cAAe;IACzD,MAAM,OAAO,AAAC,MAAM,gBAAgB,cAAe;IACnD,MAAM,cAA2B;QAC/B,IAAI;QACJ;QACA;QACA;QACA;QACA;IACF;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/AppPage.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"AppPage\": \"AppPage-module__r3Htna__AppPage\",\n  \"cornerstone\": \"AppPage-module__r3Htna__cornerstone\",\n  \"item\": \"AppPage-module__r3Htna__item\",\n  \"main\": \"AppPage-module__r3Htna__main\",\n  \"navigation\": \"AppPage-module__r3Htna__navigation\",\n  \"toolbar\": \"AppPage-module__r3Htna__toolbar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/AppPage.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\nimport styles from \"./AppPage.module.css\";\nimport { intercalate } from \"@/analysis/utility\";\n\nexport default function AppPage(props: {\n  path: ReactNode[];\n  children: ReactNode;\n}) {\n  return (\n    <div className={styles.AppPage}>\n      <div className={styles.toolbar}>\n        <div className={styles.navigation}>\n          {intercalate(\n            (i) => [\n              <div className={styles.item} key={`sep-${i}`}>\n                {\"←\"}\n              </div>,\n            ],\n            props.path.map((x, i) => (\n              <div className={styles.item} key={`item-${i}`}>\n                {x}\n              </div>\n            )),\n          )}\n        </div>\n        <div className={styles.cornerstone}></div>\n      </div>\n      <div className={styles.main}>{props.children}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;;AAEe,SAAS,QAAQ,KAG/B;IACC,qBACE,8OAAC;QAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,OAAO;;0BAC5B,8OAAC;gBAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,OAAO;;kCAC5B,8OAAC;wBAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,UAAU;kCAC9B,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EACT,CAAC,IAAM;8CACL,8OAAC;oCAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,IAAI;8CACxB;mCAD+B,CAAC,IAAI,EAAE,GAAG;;;;;6BAG7C,EACD,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,kBACjB,8OAAC;gCAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,IAAI;0CACxB;+BAD+B,CAAC,KAAK,EAAE,GAAG;;;;;;;;;;kCAMnD,8OAAC;wBAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,WAAW;;;;;;;;;;;;0BAEpC,8OAAC;gBAAI,WAAW,uIAAA,CAAA,UAAM,CAAC,IAAI;0BAAG,MAAM,QAAQ;;;;;;;;;;;;AAGlD","debugId":null}},
    {"offset": {"line": 589, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/ArticlePreview.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ArticlePreview\": \"ArticlePreview-module__rjMMPa__ArticlePreview\",\n  \"footer\": \"ArticlePreview-module__rjMMPa__footer\",\n  \"publishedTime\": \"ArticlePreview-module__rjMMPa__publishedTime\",\n  \"summary\": \"ArticlePreview-module__rjMMPa__summary\",\n  \"tags\": \"ArticlePreview-module__rjMMPa__tags\",\n  \"title\": \"ArticlePreview-module__rjMMPa__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/Tag.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"Tag\": \"Tag-module__CUvvuq__Tag\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/Tag.tsx"],"sourcesContent":["import styles from \"./Tag.module.css\";\n\nexport default function Tag(props: { tag: string }) {\n  return <div className={styles.Tag}>{props.tag}</div>;\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,IAAI,KAAsB;IAChD,qBAAO,8OAAC;QAAI,WAAW,mIAAA,CAAA,UAAM,CAAC,GAAG;kBAAG,MAAM,GAAG;;;;;;AAC/C","debugId":null}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/LinkButton.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"LinkButton\": \"LinkButton-module___dH1Ra__LinkButton\",\n  \"disabled\": \"LinkButton-module___dH1Ra__disabled\",\n  \"vertical\": \"LinkButton-module___dH1Ra__vertical\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/LinkButton.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { HTMLAttributeAnchorTarget, ReactNode } from \"react\";\nimport styles from \"./LinkButton.module.css\";\n\nexport default function LinkButton(props: {\n  href: string;\n  disabled?: boolean;\n  vertical?: boolean;\n  children: ReactNode;\n  target?: HTMLAttributeAnchorTarget;\n}) {\n  return (\n    <Link\n      className={[\n        [styles.LinkButton],\n        props.disabled ? [styles.disabled] : [],\n        props.vertical ? [styles.vertical] : [],\n      ]\n        .flatMap((s) => s)\n        .join(\" \")}\n      href={props.disabled ? \"#\" : props.href}\n      target={props.target}\n    >\n      {props.children}\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEe,SAAS,WAAW,KAMlC;IACC,qBACE,8OAAC,4JAAA,CAAA,UAAI;QACH,WAAW;YACT;gBAAC,0IAAA,CAAA,UAAM,CAAC,UAAU;aAAC;YACnB,MAAM,QAAQ,GAAG;gBAAC,0IAAA,CAAA,UAAM,CAAC,QAAQ;aAAC,GAAG,EAAE;YACvC,MAAM,QAAQ,GAAG;gBAAC,0IAAA,CAAA,UAAM,CAAC,QAAQ;aAAC,GAAG,EAAE;SACxC,CACE,OAAO,CAAC,CAAC,IAAM,GACf,IAAI,CAAC;QACR,MAAM,MAAM,QAAQ,GAAG,MAAM,MAAM,IAAI;QACvC,QAAQ,MAAM,MAAM;kBAEnB,MAAM,QAAQ;;;;;;AAGrB","debugId":null}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/ArticlePreview.tsx"],"sourcesContent":["import { ArticlePreview } from \"@/analysis/ontology\";\nimport Link from \"next/link\";\nimport Markdown from \"react-markdown\";\nimport styles from \"./ArticlePreview.module.css\";\nimport { formatDate } from \"@/analysis/utility\";\nimport Tag from \"./Tag\";\nimport LinkButton from \"./LinkButton\";\n\nexport default function ArticlePreviewComponent(props: {\n  preview: ArticlePreview;\n}) {\n  return (\n    <div className={styles.ArticlePreview}>\n      <div className={styles.title}>\n        <Link href={props.preview.metadata.url} target=\"_blank\">\n          {props.preview.metadata.title ?? props.preview.metadata.url}\n        </Link>\n      </div>\n      {props.preview.tags && (\n        <div className={styles.tags}>\n          {props.preview.tags.map((tag, j) => (\n            <Tag tag={tag} key={j} />\n          ))}\n        </div>\n      )}\n      {props.preview.metadata.publishedTime && (\n        <div className={styles.publishedTime}>\n          {\"published: \"}\n          {props.preview.metadata.publishedTime instanceof Date\n            ? formatDate(props.preview.metadata.publishedTime)\n            : props.preview.metadata.publishedTime}\n        </div>\n      )}\n      {props.preview.summary && (\n        <div className={styles.summary}>\n          <Markdown>{props.preview.summary}</Markdown>\n        </div>\n      )}\n      <div className={styles.footer}>\n        <LinkButton href={props.preview.metadata.url} target=\"_blank\">\n          🔗\n        </LinkButton>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEe,SAAS,wBAAwB,KAE/C;IACC,qBACE,8OAAC;QAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,cAAc;;0BACnC,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,KAAK;0BAC1B,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAM,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;oBAAE,QAAO;8BAC5C,MAAM,OAAO,CAAC,QAAQ,CAAC,KAAK,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;;;;;;;;;;;YAG9D,MAAM,OAAO,CAAC,IAAI,kBACjB,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,IAAI;0BACxB,MAAM,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,kBAC5B,8OAAC,wHAAA,CAAA,UAAG;wBAAC,KAAK;uBAAU;;;;;;;;;;YAIzB,MAAM,OAAO,CAAC,QAAQ,CAAC,aAAa,kBACnC,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,aAAa;;oBACjC;oBACA,MAAM,OAAO,CAAC,QAAQ,CAAC,aAAa,YAAY,OAC7C,CAAA,GAAA,0HAAA,CAAA,aAAU,AAAD,EAAE,MAAM,OAAO,CAAC,QAAQ,CAAC,aAAa,IAC/C,MAAM,OAAO,CAAC,QAAQ,CAAC,aAAa;;;;;;;YAG3C,MAAM,OAAO,CAAC,OAAO,kBACpB,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,OAAO;0BAC5B,cAAA,8OAAC,wLAAA,CAAA,UAAQ;8BAAE,MAAM,OAAO,CAAC,OAAO;;;;;;;;;;;0BAGpC,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,MAAM;0BAC3B,cAAA,8OAAC,+HAAA,CAAA,UAAU;oBAAC,MAAM,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;oBAAE,QAAO;8BAAS;;;;;;;;;;;;;;;;;AAMtE","debugId":null}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/all/[pageIndex]/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"addedDate\": \"page-module__kXvtoq__addedDate\",\n  \"location\": \"page-module__kXvtoq__location\",\n  \"navigation\": \"page-module__kXvtoq__navigation\",\n  \"previews\": \"page-module__kXvtoq__previews\",\n  \"toolbar\": \"page-module__kXvtoq__toolbar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/FocusSpan.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"FocusSpan\": \"FocusSpan-module__IrJsIG__FocusSpan\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA"}},
    {"offset": {"line": 790, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/FocusSpan.tsx"],"sourcesContent":["import styles from \"./FocusSpan.module.css\";\n\nexport default function FocusSpan({ children }: { children: React.ReactNode }) {\n  return <span className={styles.FocusSpan}>{children}</span>;\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,UAAU,EAAE,QAAQ,EAAiC;IAC3E,qBAAO,8OAAC;QAAK,WAAW,yIAAA,CAAA,UAAM,CAAC,SAAS;kBAAG;;;;;;AAC7C","debugId":null}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/app/all/%5BpageIndex%5D/page.tsx"],"sourcesContent":["import {\n  readArticleMetadata,\n  readArticleSummary,\n  readArticleTags,\n} from \"@/analysis/article\";\nimport { ArticlePreview } from \"@/analysis/ontology\";\nimport paths from \"@/analysis/paths\";\nimport AppPage from \"@/component/AppPage\";\nimport ArticlePreviewComponent from \"@/component/ArticlePreview\";\nimport LinkButton from \"@/component/LinkButton\";\nimport { Metadata } from \"next\";\nimport { cache } from \"react\";\nimport styles from \"./page.module.css\";\nimport FocusSpan from \"@/component/FocusSpan\";\n\nconst config = {\n  articles_per_page: 10,\n};\n\ntype Params = {\n  pageIndex: string;\n};\n\ntype Props = {\n  params: Promise<Params>;\n};\n\nconst getCachedData = cache(async () => {\n  const ids_all = await paths.get_articleIds();\n\n  const mds_all = (\n    await Promise.all(ids_all.map(async (id) => await readArticleMetadata(id)))\n  ).filter((md) => md !== null);\n  // sorted from newest (higher `addedTime` value) to oldest\n  mds_all.sort((x, y) => y.addedTime - x.addedTime);\n\n  const previews_all: ArticlePreview[] = await Promise.all(\n    mds_all.map(async (md) => {\n      return {\n        metadata: md,\n        summary: (await readArticleSummary(md.id)) ?? undefined,\n        tags: (await readArticleTags(md.id)) ?? undefined,\n      };\n    }),\n  );\n\n  const pageIndex_max =\n    Math.ceil(ids_all.length / config.articles_per_page) - 1;\n\n  const count_pages = Math.ceil(ids_all.length / config.articles_per_page);\n\n  return { ids_all, mds_all, previews_all, pageIndex_max, count_pages };\n});\n\nfunction get_title(pageIndex: number, pageIndex_max: number) {\n  return `url-notes | all | page ${pageIndex + 1} of ${pageIndex_max + 1}`;\n}\n\nexport async function generateStaticParams(): Promise<Params[]> {\n  const { count_pages } = await getCachedData();\n  const ps: Params[] = [];\n  for (let i = 0; i < count_pages; i++) {\n    ps.push({ pageIndex: `${i}` });\n  }\n  return ps;\n}\n\nexport async function generateMetadata(props: Props): Promise<Metadata> {\n  const params = await props.params;\n  const pageIndex = Number(params.pageIndex);\n  const { pageIndex_max } = await getCachedData();\n  return {\n    title: get_title(pageIndex, pageIndex_max),\n  };\n}\n\nexport default async function Page(props: Props) {\n  const params = await props.params;\n  const pageIndex = Number(params.pageIndex);\n  const { previews_all, pageIndex_max } = await getCachedData();\n  const previews = previews_all.slice(\n    pageIndex * config.articles_per_page,\n    (pageIndex + 1) * config.articles_per_page,\n  );\n\n  return (\n    <AppPage\n      path={[\n        <LinkButton href=\"/\" vertical={true} key={0}>\n          index\n        </LinkButton>,\n        <LinkButton href=\"/all/0\" vertical={true} key={0}>\n          all\n        </LinkButton>,\n      ]}\n    >\n      <div className={styles.previews}>\n        {previews.flatMap((preview, i) => [\n          <div className={styles.addedDate} key={`sep-${i}`}>\n            {preview.metadata.addedDate}\n          </div>,\n          <ArticlePreviewComponent key={i} preview={preview} />,\n        ])}\n      </div>\n      <div className={styles.toolbar}>\n        <div className={styles.navigation}>\n          <LinkButton\n            href={`/all/${Number(params.pageIndex) - 1}`}\n            disabled={!(0 < Number(params.pageIndex))}\n          >\n            newer\n          </LinkButton>\n          <LinkButton\n            href={`/all/${Number(params.pageIndex) + 1}`}\n            disabled={!(Number(params.pageIndex) < pageIndex_max)}\n          >\n            older\n          </LinkButton>\n        </div>\n        <div className={styles.location}>\n          <FocusSpan>{pageIndex + 1}</FocusSpan>/{pageIndex_max + 1}\n        </div>\n      </div>\n    </AppPage>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}