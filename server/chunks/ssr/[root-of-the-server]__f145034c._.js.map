{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/utility.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inspect } from \"util\";\n\nexport function trim(s: string): string {\n  return s.trim();\n}\n\nexport function stringify(x: any): string {\n  return JSON.stringify(x, null, 4);\n}\n\nexport function do_<A>(k: () => A): A {\n  return k();\n}\n\nexport function formatDate(date: Date): string {\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nexport function formatDateTime(date: Date): string {\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  const hours = date.getHours().toString().padStart(2, \"0\");\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day},${hours}:${minutes}`;\n}\n\nexport function fromFormattedDateTime(s: string): Date | undefined {\n  const [dateStr, timeStr] = s.split(\",\");\n  if (dateStr === undefined || timeStr === undefined) return undefined;\n  const [year, month, day] = dateStr.split(\"-\").map(Number);\n  if (year === undefined || month === undefined || day === undefined)\n    return undefined;\n  const [hours, minutes] = timeStr.split(\":\").map(Number);\n  if (hours === undefined || minutes === undefined) return undefined;\n  return new Date(year, month - 1, day, hours, minutes);\n}\n\nexport function show<A>(x: A): string {\n  return inspect(x, {\n    colors: true,\n    compact: false,\n    depth: undefined,\n    sorted: false,\n  });\n}\n\nexport function parseDate(s: string): Date | null {\n  const date = new Date(s);\n  if (isNaN(date.getTime())) return null;\n  return date;\n}\n\nexport function normString(s: string | undefined): string | undefined {\n  if (s === undefined) return undefined;\n  s = s.trim();\n  if (s.length === 0) return undefined;\n  return s;\n}\n\nexport function encodeURIComponent_v2(s: string): string {\n  return encodeURIComponent(s.replaceAll(\" \", \"_\"));\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;;;;;;AAErD;;AAEO,SAAS,KAAK,CAAS;IAC5B,OAAO,EAAE,IAAI;AACf;AAEO,SAAS,UAAU,CAAM;IAC9B,OAAO,KAAK,SAAS,CAAC,GAAG,MAAM;AACjC;AAEO,SAAS,IAAO,CAAU;IAC/B,OAAO;AACT;AAEO,SAAS,WAAW,IAAU;IACnC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAEO,SAAS,eAAe,IAAU;IACvC,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,MAAM,QAAQ,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACrD,MAAM,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACzD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,EAAE,SAAS;AACtD;AAEO,SAAS,sBAAsB,CAAS;IAC7C,MAAM,CAAC,SAAS,QAAQ,GAAG,EAAE,KAAK,CAAC;IACnC,IAAI,YAAY,aAAa,YAAY,WAAW,OAAO;IAC3D,MAAM,CAAC,MAAM,OAAO,IAAI,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAClD,IAAI,SAAS,aAAa,UAAU,aAAa,QAAQ,WACvD,OAAO;IACT,MAAM,CAAC,OAAO,QAAQ,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAChD,IAAI,UAAU,aAAa,YAAY,WAAW,OAAO;IACzD,OAAO,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,OAAO;AAC/C;AAEO,SAAS,KAAQ,CAAI;IAC1B,OAAO,CAAA,GAAA,iGAAA,CAAA,UAAO,AAAD,EAAE,GAAG;QAChB,QAAQ;QACR,SAAS;QACT,OAAO;QACP,QAAQ;IACV;AACF;AAEO,SAAS,UAAU,CAAS;IACjC,MAAM,OAAO,IAAI,KAAK;IACtB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;IAClC,OAAO;AACT;AAEO,SAAS,WAAW,CAAqB;IAC9C,IAAI,MAAM,WAAW,OAAO;IAC5B,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,MAAM,KAAK,GAAG,OAAO;IAC3B,OAAO;AACT;AAEO,SAAS,sBAAsB,CAAS;IAC7C,OAAO,mBAAmB,EAAE,UAAU,CAAC,KAAK;AAC9C","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/console.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport path from \"path\";\nimport { formatDateTime } from \"./utility\";\n\nexport function log(...xs: any[]) {\n  console.log(`[${formatDateTime(new Date())}]`, ...xs);\n}\n\nexport function error(...xs: any[]) {\n  console.error(`[${formatDateTime(new Date())}]`, ...xs);\n}\n\nexport function makeConsole(args: { __filename: string }) {\n  const prefix = `[${path.basename(args.__filename)}]`;\n  return {\n    log(...xs: any[]) {\n      log(prefix, ...xs);\n    },\n    error(...xs: any[]) {\n      error(prefix, ...xs);\n    },\n  } as const;\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AACrD;AACA;;;AAEO,SAAS,IAAI,GAAG,EAAS;IAC9B,QAAQ,GAAG,CAAC,CAAC,CAAC,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,CAAC,CAAC,KAAK;AACpD;AAEO,SAAS,MAAM,GAAG,EAAS;IAChC,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,CAAC,CAAC,KAAK;AACtD;AAEO,SAAS,YAAY,IAA4B;IACtD,MAAM,SAAS,CAAC,CAAC,EAAE,iGAAA,CAAA,UAAI,CAAC,QAAQ,CAAC,KAAK,UAAU,EAAE,CAAC,CAAC;IACpD,OAAO;QACL,KAAI,GAAG,EAAS;YACd,IAAI,WAAW;QACjB;QACA,OAAM,GAAG,EAAS;YAChB,MAAM,WAAW;QACnB;IACF;AACF","debugId":null}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/ai.ts"],"sourcesContent":["import { execFile } from \"child_process\";\nimport { promisify } from \"util\";\nimport { error } from \"./console\";\nconst execFileAsync = promisify(execFile);\n\nexport async function gemini(\n  prompt: string,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  opts?: {\n    model: \"gemini-2.5-pro\" | \"gemini-2.5-flash\";\n  },\n) {\n  const { stdout, stderr } = await execFileAsync(\n    `gemini`,\n    [\n      // opts?.model ? [`--model`, opts.model] : [],\n      `--prompt`,\n      prompt.trim(),\n    ].flat(),\n  );\n  if (stderr.length > 0) error(stderr);\n  let result = stdout;\n  const prefix = \"Loaded cached credentials.\\n\";\n  if (result.startsWith(prefix)) result = result.slice(prefix.length);\n  return result;\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AACA,MAAM,gBAAgB,CAAA,GAAA,iGAAA,CAAA,YAAS,AAAD,EAAE,mHAAA,CAAA,WAAQ;AAEjC,eAAe,OACpB,MAAc,EACd,6DAA6D;AAC7D,IAEC;IAED,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,cAC/B,CAAC,MAAM,CAAC,EACR;QACE,8CAA8C;QAC9C,CAAC,QAAQ,CAAC;QACV,OAAO,IAAI;KACZ,CAAC,IAAI;IAER,IAAI,OAAO,MAAM,GAAG,GAAG,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EAAE;IAC7B,IAAI,SAAS;IACb,MAAM,SAAS;IACf,IAAI,OAAO,UAAU,CAAC,SAAS,SAAS,OAAO,KAAK,CAAC,OAAO,MAAM;IAClE,OAAO;AACT","debugId":null}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/file.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type z from \"zod\";\nimport * as fs from \"fs/promises\";\nimport path from \"path\";\n\nexport async function readTextFile(filepath: string): Promise<string | null> {\n  try {\n    return await fs.readFile(filepath, { encoding: \"utf8\" });\n  } catch {\n    return null;\n  }\n}\n\nexport async function writeTextFile(\n  filepath: string,\n  content: string,\n): Promise<void> {\n  await fs.mkdir(path.dirname(filepath), { recursive: true });\n  await fs.writeFile(filepath, content, { encoding: \"utf8\" });\n}\n\nexport async function readJsonFile<A>(\n  filepath: string,\n  schema: z.ZodSchema<A>,\n): Promise<z.ZodSafeParseResult<A> | null> {\n  let content: string;\n  try {\n    content = await fs.readFile(filepath, { encoding: \"utf8\" });\n  } catch {\n    return null;\n  }\n  // makes sure to still throw error if we cant even parse the JSON\n  return schema.safeParseAsync(JSON.parse(content));\n}\n\nexport async function writeJsonFile(\n  filepath: string,\n  data: any,\n): Promise<void> {\n  await fs.mkdir(path.dirname(filepath), { recursive: true });\n  await fs.writeFile(filepath, JSON.stringify(data, null, 4), {\n    encoding: \"utf8\",\n  });\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;AAErD;AACA;;;AAEO,eAAe,aAAa,QAAgB;IACjD,IAAI;QACF,OAAO,MAAM,qHAAA,CAAA,WAAW,CAAC,UAAU;YAAE,UAAU;QAAO;IACxD,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,cACpB,QAAgB,EAChB,OAAe;IAEf,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,WAAW;QAAE,WAAW;IAAK;IACzD,MAAM,qHAAA,CAAA,YAAY,CAAC,UAAU,SAAS;QAAE,UAAU;IAAO;AAC3D;AAEO,eAAe,aACpB,QAAgB,EAChB,MAAsB;IAEtB,IAAI;IACJ,IAAI;QACF,UAAU,MAAM,qHAAA,CAAA,WAAW,CAAC,UAAU;YAAE,UAAU;QAAO;IAC3D,EAAE,OAAM;QACN,OAAO;IACT;IACA,iEAAiE;IACjE,OAAO,OAAO,cAAc,CAAC,KAAK,KAAK,CAAC;AAC1C;AAEO,eAAe,cACpB,QAAgB,EAChB,IAAS;IAET,MAAM,qHAAA,CAAA,QAAQ,CAAC,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,WAAW;QAAE,WAAW;IAAK;IACzD,MAAM,qHAAA,CAAA,YAAY,CAAC,UAAU,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;QAC1D,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/ontology.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as rss_parser from \"rss-parser\";\nimport z from \"zod\";\nimport { parseDate } from \"./utility\";\n\nexport const FuzzyDate = z.string().transform((s) => {\n  const d = parseDate(s);\n  if (!d) return s;\n  return d;\n});\n\nexport type Article = z.infer<typeof Article>;\n\nexport const Article = z.object({\n  title: z.string().optional().describe(\"The title of the article\"),\n  content: z\n    .string()\n    .optional()\n    .describe(\"The HTML string of processed article content\"),\n  textContent: z\n    .string()\n    .optional()\n    .describe(\n      \"The text content of the article, with all the HTML tags removed\",\n    ),\n  length: z\n    .number()\n    .optional()\n    .describe(\"The length of an article, in characters\"),\n  excerpt: z\n    .string()\n    .optional()\n    .describe(\"The article description, or short excerpt from the content\"),\n  byline: z.string().optional().describe(\"The author metadata\"),\n  dir: z.string().optional().describe(\"The content direction\"),\n  siteName: z.string().optional().describe(\"The name of the site\"),\n  lang: z.string().optional().describe(\"The content language\"),\n  publishedTime: FuzzyDate.optional().describe(\"The published time\"),\n  summary: z\n    .string()\n    .optional()\n    .describe(\"A short summary of the article content\"),\n  tags: z\n    .array(z.string())\n    .optional()\n    .describe(\"A list of categorizational tags for the article content\"),\n  url: z.url().optional().describe(\"The URL of the article\"),\n});\n\nexport type ArticleContent = z.infer<typeof ArticleContent>;\nexport const ArticleContent = z.string();\n\nexport type ArticleMetadata = z.infer<typeof ArticleMetadata>;\nexport const ArticleMetadata = z.object({\n  id: z.string(),\n  title: z.optional(z.string()),\n  url: z.string(),\n  addedDate: z.iso.date(),\n  addedTime: z.number(),\n  publishedTime: z.optional(FuzzyDate),\n});\n\nexport type ArticleSummary = z.infer<typeof ArticleSummary>;\nexport const ArticleSummary = z.string();\n\nexport type ArticleTags = z.infer<typeof ArticleTags>;\nexport const ArticleTags = z.array(z.string());\n\nexport type ArticlePlus = z.infer<typeof ArticlePlus>;\nexport const ArticlePlus = z.object({\n  id: z.string(),\n  article: Article,\n  metadata: ArticleMetadata,\n  content: z.optional(ArticleContent),\n  summary: z.optional(ArticleSummary),\n  tags: z.optional(ArticleTags),\n});\n\nexport type ArticlePreview = {\n  metadata: ArticleMetadata;\n  summary?: ArticleSummary;\n  tags?: ArticleTags;\n};\n\n/**\n * RSS feed config.\n *\n * Example:\n * ```json\n * {\n *   \"name\": \"Hacker News Top\",\n *   \"feedUrl\": \"https://hnrss.org/best\",\n *   \"maxItems\": 20\n * }\n * ```\n */\nexport type RssFeedConfig = z.infer<typeof RssFeedConfig>;\nexport const RssFeedConfig = z.object({\n  name: z.string().nonempty(),\n  feedUrl: z.url(),\n  maxItems: z.optional(z.number().min(1)),\n});\n\n/**\n * RSS feed.\n *\n * Example:\n * ```json\n * {\n *  items: [\n *    {\n *      creator: \"rd\",\n *      title: \"GPT-5\",\n *      link: \"https://openai.com/gpt-5/\",\n *      pubDate: \"Thu, 07 Aug 2025 17:00:21 +0000\",\n *      \"dc:creator\": \"rd\",\n *      comments: \"https://news.ycombinator.com/item?id=44826997\",\n *      content: \"\\n<p><a href=\\\"https://www.youtube.com/watch?v=0Uu_VJeVVfo\\\" rel=\\\"nofollow\\\">https://www.youtube.com/watch?v=0Uu_VJeVVfo</a></p>\\n<hr>\\n<p>Comments URL: <a href=\\\"https://news.ycombinator.com/item?id=44826997\\\">https://news.ycombinator.com/item?id=44826997</a></p>\\n<p>Points: 1323</p>\\n<p># Comments: 1583</p>\\n\",\n *      contentSnippet: \"https://www.youtube.com/watch?v=0Uu_VJeVVfo\\nComments URL: https://news.ycombinator.com/item?id=44826997\\nPoints: 1323\\n# Comments: 1583\",\n *      guid: \"https://news.ycombinator.com/item?id=44826997\",\n *      isoDate: \"2025-08-07T17:00:21.000Z\",\n *    }\n *  ],\n *  feedUrl: \"https://hnrss.org/best\",\n *  paginationLinks: {\n *    self: \"https://hnrss.org/best\",\n *  },\n *  title: \"Hacker News: Best\",\n *  description: \"Hacker News RSS\",\n *  generator: \"hnrss v2.1.1\",\n *  link: \"https://news.ycombinator.com/best\",\n *  lastBuildDate: \"Fri, 08 Aug 2025 00:04:01 +0000\",\n *  docs: \"https://hnrss.org/\",\n * }\n * ```\n */\nexport type RssFeed = {\n  config: RssFeedConfig;\n  rss: rss_parser.Output<{ [key: string]: any }>;\n};\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;;;;AAGrD;AACA;;;AAEO,MAAM,YAAY,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;IAC7C,MAAM,IAAI,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD,EAAE;IACpB,IAAI,CAAC,GAAG,OAAO;IACf,OAAO;AACT;AAIO,MAAM,UAAU,4IAAA,CAAA,UAAC,CAAC,MAAM,CAAC;IAC9B,OAAO,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IACtC,SAAS,4IAAA,CAAA,UAAC,CACP,MAAM,GACN,QAAQ,GACR,QAAQ,CAAC;IACZ,aAAa,4IAAA,CAAA,UAAC,CACX,MAAM,GACN,QAAQ,GACR,QAAQ,CACP;IAEJ,QAAQ,4IAAA,CAAA,UAAC,CACN,MAAM,GACN,QAAQ,GACR,QAAQ,CAAC;IACZ,SAAS,4IAAA,CAAA,UAAC,CACP,MAAM,GACN,QAAQ,GACR,QAAQ,CAAC;IACZ,QAAQ,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IACvC,KAAK,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IACpC,UAAU,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IACzC,MAAM,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IACrC,eAAe,UAAU,QAAQ,GAAG,QAAQ,CAAC;IAC7C,SAAS,4IAAA,CAAA,UAAC,CACP,MAAM,GACN,QAAQ,GACR,QAAQ,CAAC;IACZ,MAAM,4IAAA,CAAA,UAAC,CACJ,KAAK,CAAC,4IAAA,CAAA,UAAC,CAAC,MAAM,IACd,QAAQ,GACR,QAAQ,CAAC;IACZ,KAAK,4IAAA,CAAA,UAAC,CAAC,GAAG,GAAG,QAAQ,GAAG,QAAQ,CAAC;AACnC;AAGO,MAAM,iBAAiB,4IAAA,CAAA,UAAC,CAAC,MAAM;AAG/B,MAAM,kBAAkB,4IAAA,CAAA,UAAC,CAAC,MAAM,CAAC;IACtC,IAAI,4IAAA,CAAA,UAAC,CAAC,MAAM;IACZ,OAAO,4IAAA,CAAA,UAAC,CAAC,QAAQ,CAAC,4IAAA,CAAA,UAAC,CAAC,MAAM;IAC1B,KAAK,4IAAA,CAAA,UAAC,CAAC,MAAM;IACb,WAAW,4IAAA,CAAA,UAAC,CAAC,GAAG,CAAC,IAAI;IACrB,WAAW,4IAAA,CAAA,UAAC,CAAC,MAAM;IACnB,eAAe,4IAAA,CAAA,UAAC,CAAC,QAAQ,CAAC;AAC5B;AAGO,MAAM,iBAAiB,4IAAA,CAAA,UAAC,CAAC,MAAM;AAG/B,MAAM,cAAc,4IAAA,CAAA,UAAC,CAAC,KAAK,CAAC,4IAAA,CAAA,UAAC,CAAC,MAAM;AAGpC,MAAM,cAAc,4IAAA,CAAA,UAAC,CAAC,MAAM,CAAC;IAClC,IAAI,4IAAA,CAAA,UAAC,CAAC,MAAM;IACZ,SAAS;IACT,UAAU;IACV,SAAS,4IAAA,CAAA,UAAC,CAAC,QAAQ,CAAC;IACpB,SAAS,4IAAA,CAAA,UAAC,CAAC,QAAQ,CAAC;IACpB,MAAM,4IAAA,CAAA,UAAC,CAAC,QAAQ,CAAC;AACnB;AAqBO,MAAM,gBAAgB,4IAAA,CAAA,UAAC,CAAC,MAAM,CAAC;IACpC,MAAM,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,SAAS,4IAAA,CAAA,UAAC,CAAC,GAAG;IACd,UAAU,4IAAA,CAAA,UAAC,CAAC,QAAQ,CAAC,4IAAA,CAAA,UAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AACtC","debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/paths.ts"],"sourcesContent":["import path from \"path\";\nimport * as fs from \"fs/promises\";\nimport { log } from \"./console\";\n\n// input\nconst dirpath_feed = path.join(\"input\", \"feed\");\n// output-1\nconst dirpath_article = path.join(\"output-1\", \"article\");\nconst dirpath_article_metadata = path.join(\"output-1\", \"article_metadata\");\n// output-2\nconst dirpath_article_content = path.join(\"output-2\", \"article_content\");\nconst dirpath_article_summary = path.join(\"output-2\", \"article_summary\");\nconst dirpath_article_tags = path.join(\"output-2\", \"article_tags\");\n\nexport const paths = {\n  // keywords\n  filepath_keywords_focused: path.join(\"input\", \"keywords_focused.json\"),\n  filepath_keywords_ignored: path.join(\"input\", \"keywords_ignored.json\"),\n  // feed\n  dirpath_feed,\n  async get_filepaths_of_feeds(): Promise<string[]> {\n    return (\n      await fs.readdir(dirpath_feed, { encoding: \"utf8\", recursive: false })\n    ).flatMap((fn) =>\n      fn.endsWith(\".feed.json\") ? [path.join(dirpath_feed, fn)] : [],\n    );\n  },\n\n  // article\n  dirpath_article,\n  dirpath_article_metadata,\n  dirpath_article_content,\n  dirpath_article_summary,\n  dirpath_article_tags,\n  async get_articleIds(): Promise<string[]> {\n    log(\"[get_articleIds]\");\n    return (\n      await fs.readdir(dirpath_article, { encoding: \"utf8\", recursive: false })\n    ).flatMap((fn) =>\n      fn.endsWith(\".json\") ? [path.basename(fn, \".json\")] : [],\n    );\n  },\n  filepath_articleIds_ignored: path.join(\"output-1\", \"articleIds_ignored.json\"),\n  filepath_article(id_article: string) {\n    return path.join(dirpath_article, `${id_article}.json`);\n  },\n  filepath_article_metadata(id_article: string) {\n    return path.join(dirpath_article_metadata, `${id_article}.json`);\n  },\n  filepath_article_content(id_article: string) {\n    return path.join(dirpath_article_content, `${id_article}.md`);\n  },\n  filepath_article_summary(id_article: string) {\n    return path.join(dirpath_article_summary, `${id_article}.md`);\n  },\n  filepath_article_tags(id_article: string) {\n    return path.join(dirpath_article_tags, `${id_article}.csv`);\n  },\n};\n\nexport default paths;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,QAAQ;AACR,MAAM,eAAe,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,SAAS;AACxC,WAAW;AACX,MAAM,kBAAkB,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;AAC9C,MAAM,2BAA2B,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;AACvD,WAAW;AACX,MAAM,0BAA0B,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;AACtD,MAAM,0BAA0B,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;AACtD,MAAM,uBAAuB,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;AAE5C,MAAM,QAAQ;IACnB,WAAW;IACX,2BAA2B,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,SAAS;IAC9C,2BAA2B,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,SAAS;IAC9C,OAAO;IACP;IACA,MAAM;QACJ,OAAO,CACL,MAAM,qHAAA,CAAA,UAAU,CAAC,cAAc;YAAE,UAAU;YAAQ,WAAW;QAAM,EACtE,EAAE,OAAO,CAAC,CAAC,KACT,GAAG,QAAQ,CAAC,gBAAgB;gBAAC,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,cAAc;aAAI,GAAG,EAAE;IAElE;IAEA,UAAU;IACV;IACA;IACA;IACA;IACA;IACA,MAAM;QACJ,CAAA,GAAA,0HAAA,CAAA,MAAG,AAAD,EAAE;QACJ,OAAO,CACL,MAAM,qHAAA,CAAA,UAAU,CAAC,iBAAiB;YAAE,UAAU;YAAQ,WAAW;QAAM,EACzE,EAAE,OAAO,CAAC,CAAC,KACT,GAAG,QAAQ,CAAC,WAAW;gBAAC,iGAAA,CAAA,UAAI,CAAC,QAAQ,CAAC,IAAI;aAAS,GAAG,EAAE;IAE5D;IACA,6BAA6B,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;IACnD,kBAAiB,UAAkB;QACjC,OAAO,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,WAAW,KAAK,CAAC;IACxD;IACA,2BAA0B,UAAkB;QAC1C,OAAO,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,0BAA0B,GAAG,WAAW,KAAK,CAAC;IACjE;IACA,0BAAyB,UAAkB;QACzC,OAAO,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,yBAAyB,GAAG,WAAW,GAAG,CAAC;IAC9D;IACA,0BAAyB,UAAkB;QACzC,OAAO,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,yBAAyB,GAAG,WAAW,GAAG,CAAC;IAC9D;IACA,uBAAsB,UAAkB;QACtC,OAAO,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,sBAAsB,GAAG,WAAW,IAAI,CAAC;IAC5D;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/analysis/article.ts"],"sourcesContent":["import { Readability } from \"@mozilla/readability\";\nimport { JSDOM } from \"jsdom\";\nimport TurndownService from \"turndown\";\nimport * as ai from \"./ai\";\nimport { readJsonFile, readTextFile } from \"./file\";\nimport { Article, ArticleMetadata, ArticlePlus } from \"./ontology\";\nimport paths from \"./paths\";\n\n/**\n * Extracts an article from the HTML page at a given URL.\n *\n * @param url The URL of an HTML page.\n * @returns The {@link Article} extracted from the HTML page. If there was any error, returns null instead.\n */\nexport async function fetchArticle(url: string): Promise<Article | null> {\n  try {\n    const html = await (await fetch(url, { method: \"GET\" })).text();\n    const doc = new JSDOM(html, { url });\n    const reader = new Readability(doc.window.document);\n    const prearticle = reader.parse();\n    if (!prearticle) return null;\n    const article = Object.entries(prearticle).reduce((acc, [key, value]) => {\n      // @ts-expect-error Object.entries is not type-safe\n      acc[key] = value === null ? undefined : value;\n      return acc;\n    }, {} as Article);\n    article.url = url;\n    return article;\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Transforms an article into a Markdown document.\n *\n * @param article The article to transform.\n * @returns The Markdown document as a string that corresponds to the input article.\n */\nexport async function getMarkdownContent(article: Article): Promise<string> {\n  const turndownService = new TurndownService({ headingStyle: \"atx\" });\n  let markdownString = \"\";\n  const metadata: string[] = [];\n\n  function escape(s: string): string {\n    return s.replace(/\"/g, '\\\\\"');\n  }\n\n  // populate metadata\n  if (article.title) {\n    metadata.push(`title: \"${escape(article.title)}\"`);\n  }\n  if (article.byline) {\n    metadata.push(`author: \"${escape(article.byline)}\"`);\n  }\n  if (article.siteName) {\n    metadata.push(`siteName: \"${escape(article.siteName)}\"`);\n  }\n  if (article.publishedTime) {\n    metadata.push(`pubDate: \"${article.publishedTime}\"`);\n  }\n  if (article.lang) {\n    metadata.push(`lang: \"${escape(article.lang)}\"`);\n  }\n  if (article.tags && article.tags.length > 0) {\n    metadata.push(`tags: \"${article.tags.join(\", \")}\"`);\n  }\n\n  // write metadata\n  if (metadata.length > 0) {\n    markdownString += `---\\n${metadata.join(\"\\n\")}\\n---\\n\\n`;\n  }\n\n  if (article.title) {\n    markdownString += `# ${article.title}\\n\\n`;\n  }\n\n  if (article.content) {\n    markdownString += turndownService.turndown(article.content);\n  } else if (article.textContent) {\n    markdownString += article.textContent;\n  } else if (article.summary) {\n    markdownString += article.summary;\n  } else if (article.excerpt) {\n    markdownString += article.excerpt;\n  }\n\n  return markdownString.trim();\n}\n\nexport async function generateSummary(content: string): Promise<string> {\n  return await ai.gemini(`\nWrite a very concise and technical bullet-point overview of the following article. Use markdown syntax. Respond with JUST the overview.\n\n${content.slice(0, 200000)}\n`);\n}\n\nexport async function generateTags(\n  title: string | undefined,\n  summary: string,\n): Promise<string[]> {\n  return (\n    await ai.gemini(\n      `\nConsider the following article summary. Your task is to come up with the tags that best categorize the content. You may use many tags with varying degrees of specificity. Respond with JUST the comma-separated list of tags.\n\n${title ? `Summary of \"${title}\":` : \"Summary:\"}\n\n${summary}\n`,\n      { model: \"gemini-2.5-flash\" },\n    )\n  )\n    .split(\",\")\n    .map((s) => s.trim().toLowerCase());\n}\n\nexport async function readArticle(articleId: string): Promise<Article | null> {\n  const parseResult_article = await readJsonFile(\n    paths.filepath_article(articleId),\n    Article,\n  );\n  if (!parseResult_article) return null;\n  if (!parseResult_article.data) return null;\n  const article: Article = parseResult_article.data;\n  return article;\n}\n\nexport async function readArticleMetadata(\n  articleId: string,\n): Promise<ArticleMetadata | null> {\n  const result = await readJsonFile(\n    paths.filepath_article_metadata(articleId),\n    ArticleMetadata,\n  );\n  if (!result) return null;\n  return result.success ? result.data : null;\n}\n\nexport async function readArticleContent(\n  articleId: string,\n): Promise<string | null> {\n  return await readTextFile(paths.filepath_article_content(articleId));\n}\n\nexport async function readArticleSummary(\n  articleId: string,\n): Promise<string | null> {\n  return await readTextFile(paths.filepath_article_summary(articleId));\n}\n\nexport async function readArticleTags(\n  articleId: string,\n): Promise<string[] | null> {\n  const tags_string = await readTextFile(\n    paths.filepath_article_tags(articleId),\n  );\n  if (!tags_string) return null;\n  return tags_string.split(\",\").map((s) => s.trim());\n}\n\nexport async function readArticlePlus(\n  articleId: string,\n): Promise<ArticlePlus | null> {\n  const article = await readArticle(articleId);\n  if (!article) return null;\n  const metadata = await readArticleMetadata(articleId);\n  if (!metadata) return null;\n  const content = (await readArticleContent(articleId)) ?? undefined;\n  const summary = (await readArticleSummary(articleId)) ?? undefined;\n  const tags = (await readArticleTags(articleId)) ?? undefined;\n  const articlePlus: ArticlePlus = {\n    id: articleId,\n    article,\n    metadata,\n    content,\n    summary,\n    tags,\n  };\n  return articlePlus;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQO,eAAe,aAAa,GAAW;IAC5C,IAAI;QACF,MAAM,OAAO,MAAM,CAAC,MAAM,MAAM,KAAK;YAAE,QAAQ;QAAM,EAAE,EAAE,IAAI;QAC7D,MAAM,MAAM,IAAI,mGAAA,CAAA,QAAK,CAAC,MAAM;YAAE;QAAI;QAClC,MAAM,SAAS,IAAI,iJAAA,CAAA,cAAW,CAAC,IAAI,MAAM,CAAC,QAAQ;QAClD,MAAM,aAAa,OAAO,KAAK;QAC/B,IAAI,CAAC,YAAY,OAAO;QACxB,MAAM,UAAU,OAAO,OAAO,CAAC,YAAY,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM;YAClE,mDAAmD;YACnD,GAAG,CAAC,IAAI,GAAG,UAAU,OAAO,YAAY;YACxC,OAAO;QACT,GAAG,CAAC;QACJ,QAAQ,GAAG,GAAG;QACd,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAQO,eAAe,mBAAmB,OAAgB;IACvD,MAAM,kBAAkB,IAAI,iJAAA,CAAA,UAAe,CAAC;QAAE,cAAc;IAAM;IAClE,IAAI,iBAAiB;IACrB,MAAM,WAAqB,EAAE;IAE7B,SAAS,OAAO,CAAS;QACvB,OAAO,EAAE,OAAO,CAAC,MAAM;IACzB;IAEA,oBAAoB;IACpB,IAAI,QAAQ,KAAK,EAAE;QACjB,SAAS,IAAI,CAAC,CAAC,QAAQ,EAAE,OAAO,QAAQ,KAAK,EAAE,CAAC,CAAC;IACnD;IACA,IAAI,QAAQ,MAAM,EAAE;QAClB,SAAS,IAAI,CAAC,CAAC,SAAS,EAAE,OAAO,QAAQ,MAAM,EAAE,CAAC,CAAC;IACrD;IACA,IAAI,QAAQ,QAAQ,EAAE;QACpB,SAAS,IAAI,CAAC,CAAC,WAAW,EAAE,OAAO,QAAQ,QAAQ,EAAE,CAAC,CAAC;IACzD;IACA,IAAI,QAAQ,aAAa,EAAE;QACzB,SAAS,IAAI,CAAC,CAAC,UAAU,EAAE,QAAQ,aAAa,CAAC,CAAC,CAAC;IACrD;IACA,IAAI,QAAQ,IAAI,EAAE;QAChB,SAAS,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,QAAQ,IAAI,EAAE,CAAC,CAAC;IACjD;IACA,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,CAAC,MAAM,GAAG,GAAG;QAC3C,SAAS,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACpD;IAEA,iBAAiB;IACjB,IAAI,SAAS,MAAM,GAAG,GAAG;QACvB,kBAAkB,CAAC,KAAK,EAAE,SAAS,IAAI,CAAC,MAAM,SAAS,CAAC;IAC1D;IAEA,IAAI,QAAQ,KAAK,EAAE;QACjB,kBAAkB,CAAC,EAAE,EAAE,QAAQ,KAAK,CAAC,IAAI,CAAC;IAC5C;IAEA,IAAI,QAAQ,OAAO,EAAE;QACnB,kBAAkB,gBAAgB,QAAQ,CAAC,QAAQ,OAAO;IAC5D,OAAO,IAAI,QAAQ,WAAW,EAAE;QAC9B,kBAAkB,QAAQ,WAAW;IACvC,OAAO,IAAI,QAAQ,OAAO,EAAE;QAC1B,kBAAkB,QAAQ,OAAO;IACnC,OAAO,IAAI,QAAQ,OAAO,EAAE;QAC1B,kBAAkB,QAAQ,OAAO;IACnC;IAEA,OAAO,eAAe,IAAI;AAC5B;AAEO,eAAe,gBAAgB,OAAe;IACnD,OAAO,MAAM,qHAAA,CAAA,SAAS,CAAC,CAAC;;;AAG1B,EAAE,QAAQ,KAAK,CAAC,GAAG,QAAQ;AAC3B,CAAC;AACD;AAEO,eAAe,aACpB,KAAyB,EACzB,OAAe;IAEf,OAAO,CACL,MAAM,qHAAA,CAAA,SAAS,CACb,CAAC;;;AAGP,EAAE,QAAQ,CAAC,YAAY,EAAE,MAAM,EAAE,CAAC,GAAG,WAAW;;AAEhD,EAAE,QAAQ;AACV,CAAC,EACK;QAAE,OAAO;IAAmB,EAEhC,EACG,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,WAAW;AACpC;AAEO,eAAe,YAAY,SAAiB;IACjD,MAAM,sBAAsB,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAC3C,wHAAA,CAAA,UAAK,CAAC,gBAAgB,CAAC,YACvB,2HAAA,CAAA,UAAO;IAET,IAAI,CAAC,qBAAqB,OAAO;IACjC,IAAI,CAAC,oBAAoB,IAAI,EAAE,OAAO;IACtC,MAAM,UAAmB,oBAAoB,IAAI;IACjD,OAAO;AACT;AAEO,eAAe,oBACpB,SAAiB;IAEjB,MAAM,SAAS,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAC9B,wHAAA,CAAA,UAAK,CAAC,yBAAyB,CAAC,YAChC,2HAAA,CAAA,kBAAe;IAEjB,IAAI,CAAC,QAAQ,OAAO;IACpB,OAAO,OAAO,OAAO,GAAG,OAAO,IAAI,GAAG;AACxC;AAEO,eAAe,mBACpB,SAAiB;IAEjB,OAAO,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAAE,wHAAA,CAAA,UAAK,CAAC,wBAAwB,CAAC;AAC3D;AAEO,eAAe,mBACpB,SAAiB;IAEjB,OAAO,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EAAE,wHAAA,CAAA,UAAK,CAAC,wBAAwB,CAAC;AAC3D;AAEO,eAAe,gBACpB,SAAiB;IAEjB,MAAM,cAAc,MAAM,CAAA,GAAA,uHAAA,CAAA,eAAY,AAAD,EACnC,wHAAA,CAAA,UAAK,CAAC,qBAAqB,CAAC;IAE9B,IAAI,CAAC,aAAa,OAAO;IACzB,OAAO,YAAY,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;AACjD;AAEO,eAAe,gBACpB,SAAiB;IAEjB,MAAM,UAAU,MAAM,YAAY;IAClC,IAAI,CAAC,SAAS,OAAO;IACrB,MAAM,WAAW,MAAM,oBAAoB;IAC3C,IAAI,CAAC,UAAU,OAAO;IACtB,MAAM,UAAU,AAAC,MAAM,mBAAmB,cAAe;IACzD,MAAM,UAAU,AAAC,MAAM,mBAAmB,cAAe;IACzD,MAAM,OAAO,AAAC,MAAM,gBAAgB,cAAe;IACnD,MAAM,cAA2B;QAC/B,IAAI;QACJ;QACA;QACA;QACA;QACA;IACF;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/ArticlePreview.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ArticlePreview\": \"ArticlePreview-module__rjMMPa__ArticlePreview\",\n  \"summary\": \"ArticlePreview-module__rjMMPa__summary\",\n  \"tag\": \"ArticlePreview-module__rjMMPa__tag\",\n  \"tags\": \"ArticlePreview-module__rjMMPa__tags\",\n  \"title\": \"ArticlePreview-module__rjMMPa__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/ArticlePreview.tsx"],"sourcesContent":["import { ArticlePreview } from \"@/analysis/ontology\";\nimport styles from \"./ArticlePreview.module.css\";\nimport Link from \"next/link\";\nimport Markdown from \"react-markdown\";\n\nexport default function ArticlePreviewComponent(props: {\n  preview: ArticlePreview;\n}) {\n  return (\n    <div className={styles.ArticlePreview}>\n      <div className={styles.title}>\n        <Link href={props.preview.metadata.url} target=\"_blank\">\n          {props.preview.metadata.title ?? props.preview.metadata.url}\n        </Link>\n      </div>\n      {props.preview.tags && (\n        <div className={styles.tags}>\n          {props.preview.tags.map((tag, j) => (\n            <Link className={styles.tag} key={j} href={`/tag/${encodeURIComponent(tag)}`}>\n              {tag}\n            </Link>\n          ))}\n        </div>\n      )}\n      {props.preview.summary && (\n        <div className={styles.summary}>\n          <Markdown>{props.preview.summary}</Markdown>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;AAEe,SAAS,wBAAwB,KAE/C;IACC,qBACE,8OAAC;QAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,cAAc;;0BACnC,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,KAAK;0BAC1B,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAM,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;oBAAE,QAAO;8BAC5C,MAAM,OAAO,CAAC,QAAQ,CAAC,KAAK,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,GAAG;;;;;;;;;;;YAG9D,MAAM,OAAO,CAAC,IAAI,kBACjB,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,IAAI;0BACxB,MAAM,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,kBAC5B,8OAAC,4JAAA,CAAA,UAAI;wBAAC,WAAW,8IAAA,CAAA,UAAM,CAAC,GAAG;wBAAU,MAAM,CAAC,KAAK,EAAE,mBAAmB,MAAM;kCACzE;uBAD+B;;;;;;;;;;YAMvC,MAAM,OAAO,CAAC,OAAO,kBACpB,8OAAC;gBAAI,WAAW,8IAAA,CAAA,UAAM,CAAC,OAAO;0BAC5B,cAAA,8OAAC,wLAAA,CAAA,UAAQ;8BAAE,MAAM,OAAO,CAAC,OAAO;;;;;;;;;;;;;;;;;AAK1C","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/tag/[tag]/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"page-module__BlBJeG__button\",\n  \"content\": \"page-module__BlBJeG__content\",\n  \"controls\": \"page-module__BlBJeG__controls\",\n  \"disabled\": \"page-module__BlBJeG__disabled\",\n  \"header\": \"page-module__BlBJeG__header\",\n  \"page\": \"page-module__BlBJeG__page\",\n  \"previews\": \"page-module__BlBJeG__previews\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/component/Header.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"Header\": \"Header-module__6DZwPG__Header\",\n  \"item\": \"Header-module__6DZwPG__item\",\n  \"separator\": \"Header-module__6DZwPG__separator\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/component/Header.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\nimport styles from \"./Header.module.css\";\nimport Link from \"next/link\";\n\nexport default function Header(props: { path: ReactNode[] }) {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.item}>\n        <Link href=\"/\">url-notes</Link>\n      </div>\n      {props.path.map((item, i) => [\n        <div className={styles.separator} key={`separator-${i}`}>\n          {\"|\"}\n        </div>,\n        <div className={styles.item} key={`item-${i}`}>\n          {item}\n        </div>,\n      ])}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;;AAEe,SAAS,OAAO,KAA4B;IACzD,qBACE,8OAAC;QAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,MAAM;;0BAC3B,8OAAC;gBAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,IAAI;0BACzB,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;8BAAI;;;;;;;;;;;YAEhB,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,IAAM;kCAC3B,8OAAC;wBAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,SAAS;kCAC7B;uBADoC,CAAC,UAAU,EAAE,GAAG;;;;;kCAGvD,8OAAC;wBAAI,WAAW,sIAAA,CAAA,UAAM,CAAC,IAAI;kCACxB;uBAD+B,CAAC,KAAK,EAAE,GAAG;;;;;iBAG9C;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 734, "column": 0}, "map": {"version":3,"sources":["file:///Users/henry/Documents/url-notes-v3/src/app/tag/%5Btag%5D/page.tsx"],"sourcesContent":["import {\n  readArticleMetadata,\n  readArticleSummary,\n  readArticleTags,\n} from \"@/analysis/article\";\nimport { ArticlePreview } from \"@/analysis/ontology\";\nimport paths from \"@/analysis/paths\";\nimport ArticlePreviewComponent from \"@/component/ArticlePreview\";\nimport { Metadata } from \"next\";\nimport styles from \"./page.module.css\";\nimport { cache } from \"react\";\nimport Link from \"next/link\";\nimport Header from \"@/component/Header\";\n\ntype Params = {\n  tag: string;\n};\n\ntype Props = {\n  params: Promise<Params>;\n};\n\nconst getCachedData = cache(async () => {\n  const ids_all = await paths.get_articleIds();\n\n  const mds_all = (\n    await Promise.all(ids_all.map(async (id) => await readArticleMetadata(id)))\n  ).filter((md) => md !== null);\n  // sorted from newest (higher `addedTime` value) to oldest\n  mds_all.sort((x, y) => y.addedTime - x.addedTime);\n\n  const previews_all: ArticlePreview[] = await Promise.all(\n    mds_all.map(async (md) => {\n      return {\n        metadata: md,\n        summary: (await readArticleSummary(md.id)) ?? undefined,\n        tags: (await readArticleTags(md.id)) ?? undefined,\n      };\n    }),\n  );\n\n  return { ids_all, mds_all, previews_all };\n});\n\nexport async function generateStaticParams(): Promise<Params[]> {\n  const { previews_all } = await getCachedData();\n  const tags: Set<string> = new Set();\n  for (const preview of previews_all) {\n    if (preview.tags) {\n      for (const tag of preview.tags) {\n        tags.add(tag);\n      }\n    }\n  }\n\n  return Array.from(tags).map((tag) => ({ tag: encodeURIComponent(tag) }));\n}\n\nexport async function generateMetadata(props: Props): Promise<Metadata> {\n  const params = await props.params;\n  const tag = decodeURIComponent(params.tag);\n  return {\n    title: `url-notes | tag | ${tag}`,\n  };\n}\n\nexport default async function Page(props: Props) {\n  const params = await props.params;\n  const tag = decodeURIComponent(params.tag);\n  const { previews_all } = await getCachedData();\n  const previews = previews_all.filter((preview) =>\n    preview.tags?.includes(tag),\n  );\n\n  return (\n    <div className={styles.Page}>\n      <Header\n        path={[\n          <Link key={0} href=\"/tags\">\n            tag\n          </Link>,\n          <Link key={1} href=\"/tags\">\n            tag\n          </Link>,\n          <span key={2}>{tag}</span>,\n        ]}\n      />\n      <div className={styles.content}>\n        <div className={styles.previews}>\n          {previews.map((preview, i) => (\n            <ArticlePreviewComponent key={i} preview={preview} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAMA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;AAUA,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,QAAK,AAAD,EAAE;IAC1B,MAAM,UAAU,MAAM,wHAAA,CAAA,UAAK,CAAC,cAAc;IAE1C,MAAM,UAAU,CACd,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO,KAAO,MAAM,CAAA,GAAA,0HAAA,CAAA,sBAAmB,AAAD,EAAE,KACxE,EAAE,MAAM,CAAC,CAAC,KAAO,OAAO;IACxB,0DAA0D;IAC1D,QAAQ,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;IAEhD,MAAM,eAAiC,MAAM,QAAQ,GAAG,CACtD,QAAQ,GAAG,CAAC,OAAO;QACjB,OAAO;YACL,UAAU;YACV,SAAS,AAAC,MAAM,CAAA,GAAA,0HAAA,CAAA,qBAAkB,AAAD,EAAE,GAAG,EAAE,KAAM;YAC9C,MAAM,AAAC,MAAM,CAAA,GAAA,0HAAA,CAAA,kBAAe,AAAD,EAAE,GAAG,EAAE,KAAM;QAC1C;IACF;IAGF,OAAO;QAAE;QAAS;QAAS;IAAa;AAC1C;AAEO,eAAe;IACpB,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM;IAC/B,MAAM,OAAoB,IAAI;IAC9B,KAAK,MAAM,WAAW,aAAc;QAClC,IAAI,QAAQ,IAAI,EAAE;YAChB,KAAK,MAAM,OAAO,QAAQ,IAAI,CAAE;gBAC9B,KAAK,GAAG,CAAC;YACX;QACF;IACF;IAEA,OAAO,MAAM,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,MAAQ,CAAC;YAAE,KAAK,mBAAmB;QAAK,CAAC;AACxE;AAEO,eAAe,iBAAiB,KAAY;IACjD,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,MAAM,MAAM,mBAAmB,OAAO,GAAG;IACzC,OAAO;QACL,OAAO,CAAC,kBAAkB,EAAE,KAAK;IACnC;AACF;AAEe,eAAe,KAAK,KAAY;IAC7C,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,MAAM,MAAM,mBAAmB,OAAO,GAAG;IACzC,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM;IAC/B,MAAM,WAAW,aAAa,MAAM,CAAC,CAAC,UACpC,QAAQ,IAAI,EAAE,SAAS;IAGzB,qBACE,8OAAC;QAAI,WAAW,gJAAA,CAAA,UAAM,CAAC,IAAI;;0BACzB,8OAAC,2HAAA,CAAA,UAAM;gBACL,MAAM;kCACJ,8OAAC,4JAAA,CAAA,UAAI;wBAAS,MAAK;kCAAQ;uBAAhB;;;;;kCAGX,8OAAC,4JAAA,CAAA,UAAI;wBAAS,MAAK;kCAAQ;uBAAhB;;;;;kCAGX,8OAAC;kCAAc;uBAAJ;;;;;iBACZ;;;;;;0BAEH,8OAAC;gBAAI,WAAW,gJAAA,CAAA,UAAM,CAAC,OAAO;0BAC5B,cAAA,8OAAC;oBAAI,WAAW,gJAAA,CAAA,UAAM,CAAC,QAAQ;8BAC5B,SAAS,GAAG,CAAC,CAAC,SAAS,kBACtB,8OAAC,mIAAA,CAAA,UAAuB;4BAAS,SAAS;2BAAZ;;;;;;;;;;;;;;;;;;;;;AAM1C","debugId":null}}]
}